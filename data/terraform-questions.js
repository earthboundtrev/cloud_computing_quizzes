window.QUESTION_BANK_TERRAFORM = [
  // === IaC CONCEPTS ===
  // === Comparison (Terraform vs other) ===
  { mode: "comparison", topic: "IaC Concepts",
    q: "Terraform is best described as what type of tool?",
    options: ["Configuration management (like Ansible)", "Provisioning / infrastructure lifecycle (IaC)", "Container orchestration", "Secret management only"],
    correct: 1,
    explain: "Terraform provisions and manages infrastructure lifecycle; Ansible/Chef configure existing systems."
  },
  { mode: "comparison", topic: "Terraform Workflow",
    q: "How does Terraform's workflow differ from running ad-hoc cloud console changes?",
    options: ["No difference", "Terraform uses plan then apply; changes are explicit and reviewable", "Terraform cannot use cloud APIs", "Terraform only works offline"],
    correct: 1,
    explain: "Plan shows diff; apply executes it. State tracks what exists; no drift by hand."
  },
  { mode: "comparison", topic: "State",
    q: "Why does Terraform keep state when other IaC tools might not?",
    options: ["State is optional in Terraform", "To map config to real resources and track metadata; needed for update/destroy", "Only for Terraform Cloud", "To replace the cloud API"],
    correct: 1,
    explain: "State ties resource addresses in config to real IDs and attributes; enables refresh, update, destroy."
  },
  { mode: "comparison", topic: "Modules",
    q: "How do Terraform modules compare to reusable code in general programming?",
    options: ["They are unrelated", "Modules encapsulate reusable config (like functions/libraries); call with inputs, get outputs", "Modules only exist in Terraform Cloud", "Modules cannot have inputs"],
    correct: 1,
    explain: "Modules are reusable units: input variables, output values, call from root or other modules."
  },
  { mode: "comparison", topic: "Providers",
    q: "What is the role of a Terraform provider compared to the Terraform core?",
    options: ["Provider is the core", "Core handles config/lang/state; provider implements resources for a specific API (e.g. AWS, Azure)", "Providers are only for modules", "There is only one provider"],
    correct: 1,
    explain: "Terraform core: HCL, state, plan/apply. Providers (plugins) implement resources and data sources for APIs."
  },
  { mode: "exam", topic: "IaC Concepts",
    q: "What is the main benefit of Infrastructure as Code (IaC)?",
    options: ["Manual changes are faster", "Infrastructure is versioned, repeatable, and auditable", "No cloud APIs needed", "Only used for development"],
    correct: 1,
    explain: "IaC treats infrastructure as version-controlled code: repeatable, consistent, and auditable."
  },
  { mode: "exam", topic: "IaC Concepts",
    q: "How does Terraform differ from configuration management tools like Ansible or Chef?",
    options: ["Terraform only configures OS settings", "Terraform is declarative and focuses on provisioning; config tools focus on configuring existing systems", "Terraform cannot use cloud APIs", "There is no difference"],
    correct: 1,
    explain: "Terraform provisions and manages lifecycle of resources (create/update/destroy). Ansible/Chef configure existing systems."
  },
  { mode: "exam", topic: "Terraform Workflow",
    q: "What is the correct order of the core Terraform workflow?",
    options: ["Apply → Plan → Init", "Init → Plan → Apply", "Plan → Init → Apply", "Apply → Init → Plan"],
    correct: 1,
    explain: "terraform init (setup), terraform plan (preview), terraform apply (execute)."
  },
  { mode: "exam", topic: "Terraform CLI",
    q: "What does 'terraform init' do?",
    options: ["Applies configuration to infrastructure", "Initializes the working directory: downloads providers, sets up backend", "Only validates syntax", "Destroys all resources"],
    correct: 1,
    explain: "terraform init downloads providers, installs modules, and initializes the backend."
  },
  { mode: "exam", topic: "Terraform CLI",
    q: "Which command creates an execution plan without applying changes?",
    options: ["terraform apply", "terraform plan", "terraform init", "terraform destroy"],
    correct: 1,
    explain: "terraform plan shows what would change without making changes."
  },
  { mode: "exam", topic: "Terraform CLI",
    q: "How do you pass a variable value on the command line?",
    options: ["-var 'name=value'", "--variable name=value", "Only in .tfvars files", "Cannot pass variables via CLI"],
    correct: 0,
    explain: "Use -var 'key=value' or -var-file=filename. Environment variables: TF_VAR_name."
  },
  { mode: "exam", topic: "Terraform CLI",
    q: "What does 'terraform validate' check?",
    options: ["Whether resources exist in the cloud", "Configuration syntax and internal consistency", "Only .tfvars files", "Network connectivity"],
    correct: 1,
    explain: "terraform validate checks that configuration is syntactically valid and internally consistent."
  },
  { mode: "exam", topic: "Terraform CLI",
    q: "What does 'terraform fmt' do?",
    options: ["Formats state file", "Rewrites .tf files to canonical format and style", "Formats output only", "Formats Terraform Cloud UI"],
    correct: 1,
    explain: "terraform fmt rewrites configuration files to a canonical format."
  },
  { mode: "exam", topic: "Terraform CLI",
    q: "Which command is used to destroy infrastructure managed by Terraform?",
    options: ["terraform delete", "terraform remove", "terraform destroy", "terraform apply -destroy"],
    correct: 2,
    explain: "terraform destroy removes all resources in the state. terraform apply -destroy is also valid."
  },
  { mode: "exam", topic: "State",
    q: "What is the default location of the Terraform state file?",
    options: ["In the cloud only", "terraform.tfstate in the current directory", "In the provider", "There is no default"],
    correct: 1,
    explain: "By default state is stored locally in terraform.tfstate (and terraform.tfstate.backup)."
  },
  { mode: "exam", topic: "State",
    q: "Why should you use a remote backend for state in production?",
    options: ["It is required by HashiCorp", "To enable locking, collaboration, and avoid storing secrets locally", "Local state is not supported", "Remote is always faster"],
    correct: 1,
    explain: "Remote backends provide state locking, collaboration, and avoid storing sensitive state on disk."
  },
  { mode: "exam", topic: "State",
    q: "What is state locking?",
    options: ["Locking the directory", "Preventing concurrent runs from modifying the same state", "Locking variables", "A Terraform Cloud feature only"],
    correct: 1,
    explain: "State locking prevents multiple terraform apply runs from corrupting state (e.g. DynamoDB for S3 backend)."
  },
  { mode: "exam", topic: "State",
    q: "Which command shows the current state or a resource in the state?",
    options: ["terraform show", "terraform state list", "terraform output", "terraform inspect"],
    correct: 0,
    explain: "terraform show displays the state. terraform state list lists resources; terraform state show <addr> shows one."
  },
  { mode: "exam", topic: "State",
    q: "How do you remove a resource from state without destroying the actual resource?",
    options: ["terraform delete", "terraform state rm <address>", "terraform remove", "You cannot"],
    correct: 1,
    explain: "terraform state rm <resource_address> removes the resource from state; the real resource is untouched."
  },
  { mode: "exam", topic: "Configuration",
    q: "Which block is required to specify which provider(s) to use?",
    options: ["resource", "provider", "terraform { required_providers }", "module"],
    correct: 2,
    explain: "terraform { required_providers { ... } } declares provider requirements. provider block configures them."
  },
  { mode: "exam", topic: "Configuration",
    q: "How do you reference an attribute of another resource in the same configuration?",
    options: ["resource.aws_instance.web.id", "aws_instance.web.id", "Referencing other resources is not allowed", "ref(aws_instance.web.id)"],
    correct: 1,
    explain: "Reference as resource_type.resource_name.attribute (e.g. aws_instance.web.id)."
  },
  { mode: "exam", topic: "Configuration",
    q: "What is the purpose of the 'output' block?",
    options: ["To print logs", "To expose values for CLI output or other modules", "To define variables", "To trigger apply"],
    correct: 1,
    explain: "output blocks expose values after apply (terraform output) or to parent modules."
  },
  { mode: "exam", topic: "Configuration",
    q: "How do you declare a variable that can be set by the user or a .tfvars file?",
    options: ["variable \"name\" { }", "var \"name\"", "input \"name\"", "parameter \"name\""],
    correct: 0,
    explain: "variable \"name\" { } with optional default, type, description, validation."
  },
  { mode: "exam", topic: "Configuration",
    q: "What is a 'local value' in Terraform?",
    options: ["A value stored only on disk", "A named expression that can be reused in the module (locals block)", "A variable from .tfvars", "A value that cannot be used in outputs"],
    correct: 1,
    explain: "locals { name = expression } defines reusable values within the module."
  },
  { mode: "exam", topic: "Configuration",
    q: "Which data type is used for a list of strings in a variable?",
    options: ["list(string)", "string[]", "array", "strings"],
    correct: 0,
    explain: "Variable type can be list(string), map(string), object({ ... }), number, bool, etc."
  },
  { mode: "exam", topic: "Modules",
    q: "How do you call a child module from a root module?",
    options: ["module \"name\" { source = \"...\" }", "include \"name\"", "call module \"name\"", "use \"name\""],
    correct: 0,
    explain: "module \"name\" { source = \"...\"; input vars } calls a module. source can be local path, registry, or URL."
  },
  { mode: "exam", topic: "Modules",
    q: "What does the 'source' argument in a module block specify?",
    options: ["The Terraform version", "Where to load the module from (path, registry, URL)", "The state backend", "The provider version"],
    correct: 1,
    explain: "source can be a path (./modules/x), registry (hashicorp/consul/aws), or Git URL."
  },
  { mode: "exam", topic: "Modules",
    q: "How does a child module pass values to the root module?",
    options: ["Using inputs only", "Using output blocks in the child; root reads module.<name>.<output>", "Using variables only", "Child cannot pass values to root"],
    correct: 1,
    explain: "Child defines output blocks; root references them as module.<name>.<output_name>."
  },
  { mode: "exam", topic: "Modules",
    q: "What is the recommended structure for reusing a module in multiple environments?",
    options: ["Copy-paste the module for each env", "Use one module with different variable values or workspaces", "Modules cannot be reused", "Use Terraform Cloud only"],
    correct: 1,
    explain: "Call the same module with different inputs (e.g. env-specific .tfvars or workspace)."
  },
  { mode: "exam", topic: "Providers",
    q: "Where are provider requirements typically declared?",
    options: ["Only in the provider block", "In the terraform block using required_providers", "In variables", "In the state file"],
    correct: 1,
    explain: "terraform { required_providers { aws = { source = \"hashicorp/aws\"; version = \"~> 5.0\" } } }."
  },
  { mode: "exam", topic: "Providers",
    q: "How do you use multiple provider configurations (e.g. multiple AWS regions)?",
    options: ["You cannot", "Use alias in the provider block and provider = aws.alias in resources", "Only via workspaces", "Only in Terraform Cloud"],
    correct: 1,
    explain: "provider \"aws\" { alias = \"usw2\"; region = \"us-west-2\" }. Then resource ... { provider = aws.usw2 }."
  },
  { mode: "exam", topic: "Providers",
    q: "What does the 'version' constraint in required_providers do?",
    options: ["Nothing", "Restricts which provider versions terraform init can install", "Sets the Terraform version", "Only for modules"],
    correct: 1,
    explain: "version = \"~> 5.0\" allows 5.x. Use >=, <=, etc. to constrain versions."
  },
  { mode: "exam", topic: "Workspaces",
    q: "What are Terraform workspaces used for?",
    options: ["Separate state files for the same config (e.g. dev/staging/prod)", "Separate directories only", "Terraform Cloud only", "They are deprecated"],
    correct: 0,
    explain: "Workspaces (terraform workspace select) allow multiple state files; state is keyed by workspace."
  },
  { mode: "exam", topic: "Workspaces",
    q: "Which command lists available workspaces?",
    options: ["terraform env list", "terraform workspace list", "terraform list workspaces", "Workspaces are only in Terraform Cloud"],
    correct: 1,
    explain: "terraform workspace list. Also: select, new, delete."
  },
  { mode: "exam", topic: "Backend",
    q: "Where do you configure a remote backend?",
    options: ["In the provider block", "In a backend block inside terraform { }", "In variables", "In the state file"],
    correct: 1,
    explain: "terraform { backend \"s3\" { bucket = \"...\"; key = \"...\"; region = \"...\"; } }."
  },
  { mode: "exam", topic: "Backend",
    q: "Can you change the backend configuration after state already exists?",
    options: ["No, never", "Yes, but you must migrate state (e.g. terraform init -migrate-state) or lose state", "Only by deleting state", "Only with Terraform Cloud"],
    correct: 1,
    explain: "Changing backend usually requires migrating state; terraform init will prompt for -migrate-state."
  },
  { mode: "exam", topic: "Security & Best Practices",
    q: "What is a best practice for managing secrets in Terraform?",
    options: ["Store them in .tf files in git", "Use environment variables (TF_VAR_*), secret stores, or Terraform Cloud variables (sensitive)", "Always use -var on CLI", "Secrets are not supported"],
    correct: 1,
    explain: "Avoid committing secrets. Use env vars, vault, or marked-sensitive variables in Terraform Cloud."
  },
  { mode: "exam", topic: "Security & Best Practices",
    q: "How do you mark an output as sensitive so it is redacted in the CLI?",
    options: ["sensitive = true in the output block", "output_sensitive = true", "Only in Terraform Cloud", "You cannot"],
    correct: 0,
    explain: "output \"secret\" { value = ...; sensitive = true } redacts the value in plan/apply and terraform output."
  },
  { mode: "exam", topic: "Security & Best Practices",
    q: "What does 'terraform plan -lock=false' do?",
    options: ["Disables state locking (risky with remote state)", "Locks the plan file", "Disables provider locking", "Nothing"],
    correct: 0,
    explain: "-lock=false skips state lock (e.g. for automation with care); can cause state corruption if concurrent."
  },
  { mode: "exam", topic: "Terraform Cloud",
    q: "What is Terraform Cloud?",
    options: ["A cloud provider", "HashiCorp's hosted service for remote state, runs, and collaboration", "A type of backend only", "A Terraform module"],
    correct: 1,
    explain: "Terraform Cloud provides remote state, remote execution, VCS integration, and collaboration."
  },
  { mode: "exam", topic: "Terraform Cloud",
    q: "How do you configure Terraform to use Terraform Cloud as the backend?",
    options: ["backend \"cloud\" { organization = \"...\"; workspaces { name = \"...\" } }", "Only via UI", "terraform cloud init", "Cannot use Terraform Cloud as backend"],
    correct: 0,
    explain: "backend \"cloud\" { organization = \"...\"; workspaces { name = \"...\" } } or tags = { ... }."
  },
  { mode: "exam", topic: "Terraform Workflow",
    q: "What does 'terraform refresh' do?",
    options: ["Updates the state to match real infrastructure (no config change)", "Refreshes the plan only", "Updates providers only", "It is deprecated in favor of terraform apply -refresh-only"],
    correct: 0,
    explain: "terraform refresh updates state from real infrastructure. Prefer 'terraform apply -refresh-only' for clarity."
  },
  { mode: "exam", topic: "Terraform CLI",
    q: "Which flag would you use to save the plan to a file for later apply?",
    options: ["-out=planfile", "-save=planfile", "-plan=planfile", "terraform plan does not support this"],
    correct: 0,
    explain: "terraform plan -out=tfplan saves the plan; terraform apply tfplan applies it (no new plan)."
  },
  { mode: "exam", topic: "Configuration",
    q: "What is the 'count' meta-argument used for?",
    options: ["Counting resources in state", "Creating multiple instances of a resource", "Counting variables", "Limiting apply runs"],
    correct: 1,
    explain: "count = 3 creates 3 instances; reference with resource_type.name[0], [1], [2]. Use for_each for maps/sets."
  },
  { mode: "exam", topic: "Configuration",
    q: "What is the 'for_each' meta-argument used for?",
    options: ["Looping in outputs only", "Creating one resource instance per item in a map or set", "Only in modules", "Replacing count in all cases"],
    correct: 1,
    explain: "for_each = toset([\"a\",\"b\"]) or for_each = var.map creates one instance per element; reference with .key."
  },
  { mode: "exam", topic: "Configuration",
    q: "How do you reference the current workspace name in configuration?",
    options: ["var.workspace", "terraform.workspace", "env.TERRAFORM_WORKSPACE", "workspace.name"],
    correct: 1,
    explain: "terraform.workspace is the name of the currently selected workspace."
  },
  { mode: "exam", topic: "State",
    q: "What is 'terraform state mv' used for?",
    options: ["Moving state file to another directory", "Renaming a resource in state (e.g. after refactor) without recreating it", "Moving resources between workspaces", "Moving providers"],
    correct: 1,
    explain: "terraform state mv <from> <to> renames or moves resources in state so Terraform does not destroy/recreate."
  },
  { mode: "exam", topic: "Modules",
    q: "What is the Terraform Registry?",
    options: ["A cloud provider", "A public repository of Terraform modules and providers", "Only for Terraform Cloud", "A type of backend"],
    correct: 1,
    explain: "registry.terraform.io hosts modules and providers (e.g. hashicorp/aws)."
  },
  { mode: "exam", topic: "IaC Concepts",
    q: "What is declarative vs imperative in the context of IaC?",
    options: ["Declarative describes desired state; imperative describes steps to run", "They are the same", "Terraform is imperative only", "Imperative is preferred for Terraform"],
    correct: 0,
    explain: "Terraform is declarative: you describe desired state; Terraform figures out the steps (plan/apply)."
  },
  { mode: "exam", topic: "Providers",
    q: "After adding a new provider to required_providers, what must you run?",
    options: ["terraform apply", "terraform init", "terraform plan only", "Nothing"],
    correct: 1,
    explain: "terraform init installs new providers and modules; required after changing required_providers or backend."
  },
  { mode: "exam", topic: "Configuration",
    q: "What is a 'data source' in Terraform?",
    options: ["A type of variable", "A read-only reference to existing infrastructure or external data", "A resource that only reads state", "A Terraform Cloud feature"],
    correct: 1,
    explain: "data \"aws_vpc\" \"main\" { ... } fetches existing data; use data.aws_vpc.main.id etc."
  },
  { mode: "exam", topic: "Configuration",
    q: "How do you make a resource depend on another without referencing its attributes?",
    options: ["depends_on = [other_resource.type.name]", "dependency block", "You must always reference an attribute", "depends_on is only in Terraform Cloud"],
    correct: 0,
    explain: "depends_on = [aws_instance.web] forces order when there is no attribute reference."
  },
  { mode: "exam", topic: "Terraform Workflow",
    q: "What happens when you run 'terraform apply' without '-auto-approve'?",
    options: ["It applies automatically", "Terraform shows the plan and prompts for approval", "It does nothing", "It only validates"],
    correct: 1,
    explain: "terraform apply shows plan and asks for 'yes' to apply unless -auto-approve is set."
  },
  { mode: "exam", topic: "State",
    q: "Why should you not edit the state file manually?",
    options: ["It is read-only", "Manual edits can corrupt state and cause wrong plan/apply or data loss", "Editing is required for all changes", "State file does not exist locally"],
    correct: 1,
    explain: "Use terraform state commands (rm, mv, pull, push) instead of manual edits to avoid corruption."
  },
  { mode: "exam", topic: "Terraform CLI",
    q: "What does 'terraform version' show?",
    options: ["Only Terraform version", "Terraform version and provider versions", "Only provider versions", "Nothing useful"],
    correct: 1,
    explain: "Shows Terraform version and versions of providers used in the configuration."
  },
  { mode: "exam", topic: "Modules",
    q: "Can a module use a different provider than the root module?",
    options: ["No", "Yes; pass provider via the module block (providers argument) or inherit from root", "Only with Terraform Cloud", "Only with alias"],
    correct: 1,
    explain: "Modules inherit providers by default; you can pass providers = { aws = aws.usw2 } to override."
  },
  { mode: "exam", topic: "Security & Best Practices",
    q: "What is the purpose of .terraform.lock.hcl?",
    options: ["Locks the state file", "Records exact provider versions for consistent init across environments", "Locks workspaces", "It is optional and rarely used"],
    correct: 1,
    explain: "Lock file ensures everyone gets the same provider versions. Commit it for consistency."
  },
  // === TRIPLED BANK: ADDITIONAL QUESTIONS ===
  { mode: "exam", topic: "Terraform CLI",
    q: "What does 'terraform plan -destroy' do?",
    options: ["Creates a plan to destroy all resources", "Destroys without a plan", "Only refreshes state", "Is not a valid command"],
    correct: 0,
    explain: "terraform plan -destroy produces a plan showing resources that would be destroyed."
  },
  { mode: "exam", topic: "Terraform CLI",
    q: "How can you set a variable using an environment variable?",
    options: ["TF_VAR_<name> (e.g. TF_VAR_region)", "VAR_<name>", "TERRAFORM_VAR_<name>", "Environment variables cannot set variables"],
    correct: 0,
    explain: "TF_VAR_<variable_name> sets the variable; e.g. TF_VAR_region=us-east-1."
  },
  { mode: "exam", topic: "Terraform CLI",
    q: "Which command lists all resources in the state?",
    options: ["terraform list", "terraform state list", "terraform show -list", "terraform resources"],
    correct: 1,
    explain: "terraform state list outputs resource addresses in the state."
  },
  { mode: "exam", topic: "Terraform CLI",
    q: "What is the purpose of -target in terraform plan or apply?",
    options: ["Target a specific cloud region", "Limit the operation to a specific resource or module", "Set a timeout", "Target a workspace"],
    correct: 1,
    explain: "-target=aws_instance.web limits plan/apply to that resource and its dependencies (use sparingly)."
  },
  { mode: "exam", topic: "Terraform CLI",
    q: "What does 'terraform output' do?",
    options: ["Shows Terraform version", "Displays the values of output blocks", "Lists all resources", "Shows the plan"],
    correct: 1,
    explain: "terraform output shows root module outputs; terraform output -json for machine-readable."
  },
  { mode: "exam", topic: "Terraform CLI",
    q: "How do you upgrade the provider versions in .terraform.lock.hcl?",
    options: ["Edit the file manually only", "Run terraform init -upgrade", "terraform upgrade", "Lock file cannot be upgraded"],
    correct: 1,
    explain: "terraform init -upgrade updates the lock file to newest versions matching the constraints."
  },
  { mode: "exam", topic: "Terraform CLI",
    q: "What does -input=false do for terraform plan/apply?",
    options: ["Disables all input", "Disables interactive prompts for unset variables (they must be set elsewhere)", "Disables plan output", "Disables backend config"],
    correct: 1,
    explain: "-input=false skips prompting for variables; useful in CI. Variables must be set via -var, -var-file, or env."
  },
  { mode: "exam", topic: "Terraform CLI",
    q: "Which command can replace a resource by forcing recreation?",
    options: ["terraform replace", "terraform apply -replace=resource_address", "terraform destroy then apply", "terraform refresh -replace"],
    correct: 1,
    explain: "terraform apply -replace=aws_instance.web forces Terraform to destroy and recreate that resource."
  },
  { mode: "exam", topic: "State",
    q: "What is 'terraform state pull'?",
    options: ["Pull config from Git", "Download the current state and print it to stdout (e.g. for backup)", "Pull provider updates", "Pull module updates"],
    correct: 1,
    explain: "terraform state pull outputs the raw state; can redirect to a file for backup or inspection."
  },
  { mode: "exam", topic: "State",
    q: "What is 'terraform state push'?",
    options: ["Push config to Git", "Upload a state file to the backend (use with extreme caution)", "Push to Terraform Cloud only", "Push variables"],
    correct: 1,
    explain: "terraform state push <file> overwrites remote state with the file; can cause corruption if misused."
  },
  { mode: "exam", topic: "State",
    q: "When using the S3 backend, what is typically used for state locking?",
    options: ["S3 versioning only", "DynamoDB table", "Lambda function", "No locking with S3"],
    correct: 1,
    explain: "S3 backend uses a DynamoDB table (via dynamodb_table config) for state locking."
  },
  { mode: "exam", topic: "State",
    q: "What happens to state when you run 'terraform destroy'?",
    options: ["State is deleted", "State is updated to reflect that resources no longer exist (empty state)", "State is unchanged", "State is backed up only"],
    correct: 1,
    explain: "After destroy, state still exists but has no (or fewer) resources; backend and state file remain."
  },
  { mode: "exam", topic: "State",
    q: "Can you have multiple state files for the same configuration?",
    options: ["No", "Yes, using workspaces or separate backend configs (e.g. different keys)", "Only in Terraform Cloud", "Only by copying files manually"],
    correct: 1,
    explain: "Workspaces or different backend configs (e.g. different key per env) give separate state files."
  },
  { mode: "exam", topic: "Configuration",
    q: "What is the 'lifecycle' block used for?",
    options: ["Defining resource lifetime", "Controlling create_before_destroy, prevent_destroy, ignore_changes", "Only for modules", "Deprecated"],
    correct: 1,
    explain: "lifecycle { create_before_destroy = true; prevent_destroy = true; ignore_changes = [...] }."
  },
  { mode: "exam", topic: "Configuration",
    q: "How do you mark a variable as sensitive so it is redacted in plan/apply output?",
    options: ["sensitive = true in the variable block", "variable_sensitive = true", "Only in Terraform Cloud", "Variables cannot be sensitive"],
    correct: 0,
    explain: "variable \"pwd\" { sensitive = true } redacts the value in logs and plan output."
  },
  { mode: "exam", topic: "Configuration",
    q: "What is the default value of a variable if not specified?",
    options: ["Empty string", "null", "You must always specify default or the variable is required", "Zero"],
    correct: 2,
    explain: "If no default is set, the variable is required and must be provided via -var, -var-file, or TF_VAR_."
  },
  { mode: "exam", topic: "Configuration",
    q: "Can you use count and for_each on the same resource?",
    options: ["Yes", "No; use one or the other per resource", "Only in modules", "Only with Terraform 1.0+"],
    correct: 1,
    explain: "A resource can have count or for_each, not both."
  },
  { mode: "exam", topic: "Configuration",
    q: "How do you reference a resource created with for_each?",
    options: ["resource.name.key", "resource.name[\"key\"] or resource.name[\"key\"]", "resource.name.each", "Only by index"],
    correct: 1,
    explain: "aws_instance.web[\"a\"] or aws_instance.web[\"b\"] for for_each = toset([\"a\",\"b\"])."
  },
  { mode: "exam", topic: "Configuration",
    q: "What is the 'terraform' block used for?",
    options: ["Defining resources", "Required Terraform version, required_providers, and backend config", "Only backend", "Only providers"],
    correct: 1,
    explain: "terraform { required_version = \">= 1.0\"; required_providers { ... }; backend \"...\" { } }."
  },
  { mode: "exam", topic: "Configuration",
    q: "How do you specify a required Terraform version?",
    options: ["In the provider block", "required_version = \">= 1.0\" inside terraform { }", "In variables", "In the state file"],
    correct: 1,
    explain: "terraform { required_version = \">= 1.0.0\" } constrains the Terraform version."
  },
  { mode: "exam", topic: "Configuration",
    q: "What type of value does a variable with type = map(string) accept?",
    options: ["A list of strings", "A key-value map where keys and values are strings", "A single string", "A number"],
    correct: 1,
    explain: "map(string) is an object with string keys and string values, e.g. { env = \"prod\"; tier = \"web\" }."
  },
  { mode: "exam", topic: "Configuration",
    q: "What is the 'element' function used for?",
    options: ["Creating HTML elements", "Getting an element from a list by index (0-based)", "Defining resource elements", "Only in modules"],
    correct: 1,
    explain: "element(list, index) returns list[index]; wraps around. Prefer list[index] in Terraform 0.12+."
  },
  { mode: "exam", topic: "Configuration",
    q: "What does the 'lookup' function do?",
    options: ["Looks up resources in state", "Looks up a key in a map with an optional default", "Looks up variables", "Deprecated; use map[key] instead"],
    correct: 1,
    explain: "lookup(map, key, default) returns map[key] or default. In 0.12+ you can use map[key] or try()."
  },
  { mode: "exam", topic: "Modules",
    q: "What is a 'root module'?",
    options: ["A module that contains no child modules", "The directory where you run terraform commands; contains the main config", "A module from the registry", "The default workspace"],
    correct: 1,
    explain: "Root module = the config in the working directory. It can call child modules."
  },
  { mode: "exam", topic: "Modules",
    q: "Can a module call another module?",
    options: ["No", "Yes; modules can nest other modules", "Only in Terraform Cloud", "Only one level deep"],
    correct: 1,
    explain: "Child modules can call other modules; the result is a tree of modules."
  },
  { mode: "exam", topic: "Modules",
    q: "What does the 'version' argument in a module block do (for registry modules)?",
    options: ["Terraform version", "Constrains which module version to use", "Provider version", "State version"],
    correct: 1,
    explain: "version = \"~> 2.0\" in a module block restricts which version of the module to download."
  },
  { mode: "exam", topic: "Modules",
    q: "How do you pass a list or map from root to a module?",
    options: ["Only via file", "Set the variable in the module block: module \"x\" { list_var = [\"a\",\"b\"] }", "Modules cannot accept lists", "Only via environment variables"],
    correct: 1,
    explain: "Any variable type (string, list, map, object) can be passed into the module block."
  },
  { mode: "exam", topic: "Providers",
    q: "What is the 'default' provider configuration?",
    options: ["The one in default workspace", "The provider block without an alias; used when no provider is specified on a resource", "The first provider in required_providers", "The one in Terraform Cloud"],
    correct: 1,
    explain: "Resources use the default (no-alias) provider unless provider = <alias> is set."
  },
  { mode: "exam", topic: "Providers",
    q: "Where does Terraform store downloaded providers?",
    options: ["In the state file", "In .terraform/providers/ (inside the working directory)", "In /usr/lib/terraform", "Only in Terraform Cloud"],
    correct: 1,
    explain: "terraform init downloads providers into .terraform/providers/ (platform-specific subdirs)."
  },
  { mode: "exam", topic: "Providers",
    q: "What does the constraint '~> 5.1' mean for a provider version?",
    options: ["Exactly 5.1", ">= 5.1 and < 6.0 (allow patch/minor within 5.x)", ">= 5.1 only", "Only 5.1.x"],
    correct: 1,
    explain: "~> 5.1 allows 5.1.x and higher 5.x but not 6.0."
  },
  { mode: "exam", topic: "Workspaces",
    q: "What is the name of the default workspace?",
    options: ["default", "main", "master", "primary"],
    correct: 0,
    explain: "The default workspace is named 'default'. terraform workspace list shows it with *."
  },
  { mode: "exam", topic: "Workspaces",
    q: "How does state isolation work with workspaces?",
    options: ["All workspaces share one state file", "Each workspace has its own state (e.g. different state key or namespace)", "Only in Terraform Cloud", "State is not isolated"],
    correct: 1,
    explain: "Backend stores state per workspace (e.g. key = \"env/${terraform.workspace}/terraform.tfstate\")."
  },
  { mode: "exam", topic: "Backend",
    q: "What backend type is commonly used for AWS?",
    options: ["local only", "S3 with optional DynamoDB for locking", "DynamoDB only", "Lambda"],
    correct: 1,
    explain: "backend \"s3\" { bucket = \"...\"; key = \"...\"; region = \"...\"; dynamodb_table = \"...\" }."
  },
  { mode: "exam", topic: "Backend",
    q: "Can you use partial backend configuration?",
    options: ["No", "Yes; some settings can be provided via -backend-config or interactively at init", "Only for local backend", "Only in Terraform Cloud"],
    correct: 1,
    explain: "Backend config can be partial; terraform init will prompt or use -backend-config for the rest."
  },
  { mode: "exam", topic: "Backend",
    q: "What does -reconfigure do with terraform init?",
    options: ["Reconfigures providers", "Reinitializes the backend, discarding any existing state in the new backend", "Reconfigures variables", "Reconfigures workspaces"],
    correct: 1,
    explain: "terraform init -reconfigure reinitializes the backend (e.g. after backend config change) without migrating."
  },
  { mode: "exam", topic: "Security & Best Practices",
    q: "Why should you avoid committing .tfstate to version control?",
    options: ["It is binary only", "State can contain secrets and is environment-specific; use remote backend instead", "Git does not support it", "It is too large"],
    correct: 1,
    explain: "State may contain sensitive data (e.g. IPs, IDs). Use remote backend and restrict access."
  },
  { mode: "exam", topic: "Security & Best Practices",
    q: "What is the purpose of variable validation blocks?",
    options: ["To validate state", "To enforce rules on variable values (e.g. allowed values, format)", "To validate providers", "Only in Terraform Cloud"],
    correct: 1,
    explain: "variable \"env\" { validation { condition = contains([\"dev\",\"prod\"], var.env); error_message = \"...\" } }."
  },
  { mode: "exam", topic: "Security & Best Practices",
    q: "How can you reduce blast radius when testing Terraform changes?",
    options: ["Always apply in production first", "Use -target to limit scope, use workspaces or separate dirs for dev/prod", "Cannot reduce", "Use -auto-approve"],
    correct: 1,
    explain: "Use separate state (workspaces/dirs), -target sparingly, and plan review before apply."
  },
  { mode: "exam", topic: "Terraform Cloud",
    q: "What is a 'run' in Terraform Cloud?",
    options: ["A single terraform plan", "A plan and optionally apply (triggered by VCS, CLI, or API)", "Only apply", "A workspace"],
    correct: 1,
    explain: "A run = plan + optional apply. Triggered by push (VCS), terraform apply, or API."
  },
  { mode: "exam", topic: "Terraform Cloud",
    q: "How can you run Terraform locally but store state in Terraform Cloud?",
    options: ["You cannot", "Use backend \"cloud\" { ... }; run terraform init and then plan/apply locally", "Only with Terraform Cloud Agent", "State cannot be in Terraform Cloud when running locally"],
    correct: 1,
    explain: "Backend \"cloud\" stores state in TFC; you can still run plan/apply from your machine (local execution)."
  },
  { mode: "exam", topic: "Terraform Cloud",
    q: "What are Terraform Cloud workspace tags used for (in backend config)?",
    options: ["Only for display", "To select a single workspace by name or multiple workspaces by tags", "Only for naming", "Tags are not supported in backend"],
    correct: 1,
    explain: "workspaces { tags = [\"env:prod\"] } selects workspaces with that tag (one must be used)."
  },
  { mode: "exam", topic: "Terraform Workflow",
    q: "What is the difference between terraform plan and terraform apply with no arguments?",
    options: ["No difference", "plan only shows changes; apply shows and applies them (with approval unless -auto-approve)", "apply does not show plan", "plan applies in dry-run"],
    correct: 1,
    explain: "plan = preview. apply = plan + prompt (or -auto-approve) then apply."
  },
  { mode: "exam", topic: "Terraform Workflow",
    q: "When does Terraform read the state file?",
    options: ["Only at init", "During plan and apply to compare with config and real infrastructure", "Only at apply", "Never; state is only written"],
    correct: 1,
    explain: "Plan and apply read state to compute the diff and decide create/update/destroy."
  },
  { mode: "exam", topic: "IaC Concepts",
    q: "What is 'drift' in the context of Terraform?",
    options: ["A type of resource", "When real infrastructure differs from state (e.g. manual changes)", "A Terraform command", "When state is corrupted"],
    correct: 1,
    explain: "Drift = real infra no longer matches state. terraform refresh or apply -refresh-only updates state."
  },
  { mode: "exam", topic: "IaC Concepts",
    q: "What is idempotency in the context of Terraform apply?",
    options: ["Applying once only", "Re-running apply with same config produces no further changes (desired state reached)", "Only for destroy", "Not supported"],
    correct: 1,
    explain: "Idempotent: same config + apply again = no changes (state and real infra match config)."
  },
  { mode: "comparison", topic: "IaC Concepts",
    q: "How does Terraform's approach to multi-cloud differ from using separate cloud-native tools?",
    options: ["Terraform does not support multi-cloud", "One language and workflow across clouds via providers; same plan/apply/state model", "Terraform is only for AWS", "Cloud-native tools are always better"],
    correct: 1,
    explain: "Terraform uses providers (AWS, Azure, GCP, etc.) so one tool and workflow across clouds."
  },
  { mode: "comparison", topic: "Terraform CLI",
    q: "How does 'terraform plan' compare to 'terraform apply' in terms of side effects?",
    options: ["Both modify infrastructure", "plan has no side effects; apply changes infrastructure", "plan applies in dry-run", "Neither has side effects"],
    correct: 1,
    explain: "plan is read-only (may refresh state). apply performs the changes."
  },
  { mode: "comparison", topic: "Configuration",
    q: "How do Terraform variables compare to environment variables?",
    options: ["They are the same", "Terraform variables are typed and can have defaults/validation; TF_VAR_ can set them from env", "Environment variables cannot be used", "Variables are only in Terraform Cloud"],
    correct: 1,
    explain: "Variable block defines type/default/validation; TF_VAR_name sets from environment."
  },
  { mode: "exam", topic: "Configuration",
    q: "What does the 'try' function do?",
    options: ["Retries failed operations", "Tries multiple expressions and returns the first that does not produce an error", "Only for modules", "Deprecated"],
    correct: 1,
    explain: "try(expr1, expr2, default) evaluates in order; returns first success or default."
  },
  { mode: "exam", topic: "Configuration",
    q: "What is 'toset' used for?",
    options: ["To set a variable", "Converts a list to a set (unique, unordered) for use in for_each", "To set state", "To set backend"],
    correct: 1,
    explain: "for_each requires map or set; toset([\"a\",\"b\",\"a\"]) gives set of \"a\", \"b\"."
  },
  { mode: "exam", topic: "Configuration",
    q: "How do you create a conditional resource (create it only in certain cases)?",
    options: ["if block", "Use count = condition ? 1 : 0 or for_each = condition ? toset([\"x\"]) : toset([])", "conditional resources are not supported", "Only in modules"],
    correct: 1,
    explain: "count or for_each with a conditional expression; 0 or empty set = resource not created."
  },
  { mode: "exam", topic: "Configuration",
    q: "What is the 'splat' expression (e.g. aws_instance.web[*].id)?",
    options: ["A type of resource", "Returns a list of an attribute from all instances of a resource (count or for_each)", "Only for outputs", "Deprecated"],
    correct: 1,
    explain: "aws_instance.web[*].id gives [id of first, id of second, ...]. [*] is the splat."
  },
  { mode: "exam", topic: "State",
    q: "What does 'terraform state list' accept as an optional argument?",
    options: ["Nothing", "A resource address or module path to filter the list", "Only workspace name", "Only -json"],
    correct: 1,
    explain: "terraform state list [options] [address] can filter by resource or module address."
  },
  { mode: "exam", topic: "State",
    q: "When you run 'terraform state rm', what happens to the actual infrastructure?",
    options: ["It is destroyed", "Nothing; only the state entry is removed", "It is flagged for deletion", "State rm is not a valid command"],
    correct: 1,
    explain: "state rm only removes from state; the real resource is left as-is (orphaned)."
  },
  { mode: "exam", topic: "Modules",
    q: "What is the recommended way to organize modules in a monorepo?",
    options: ["All in one file", "Separate directories (e.g. modules/vpc, modules/ec2) and reference by path", "Modules cannot be in same repo", "Only use registry"],
    correct: 1,
    explain: "modules/<name>/ with source = \"./modules/<name>\" keeps modules versioned with the repo."
  },
  { mode: "exam", topic: "Terraform CLI",
    q: "What does -compact-warnings do?",
    options: ["Removes all warnings", "Condenses multiple similar warnings into one", "Only for plan", "Not a valid flag"],
    correct: 1,
    explain: "terraform plan -compact-warnings groups repeated warnings."
  },
  { mode: "exam", topic: "Terraform CLI",
    q: "How do you view the plan output in a machine-readable format?",
    options: ["terraform plan -json", "terraform plan -machine", "Only apply supports JSON", "Not supported"],
    correct: 0,
    explain: "terraform plan -json outputs the plan in JSON for tooling."
  },
  { mode: "exam", topic: "Providers",
    q: "What does 'provider' block do (without alias)?",
    options: ["Declares required provider", "Configures the default instance of that provider", "Only in modules", "Declares provider version"],
    correct: 1,
    explain: "provider \"aws\" { region = \"us-east-1\" } configures the default AWS provider."
  },
  { mode: "exam", topic: "Backend",
    q: "What is the 'local' backend?",
    options: ["Backend in Terraform Cloud", "Stores state in a local file (default behavior)", "Backend for localhost", "Deprecated"],
    correct: 1,
    explain: "backend \"local\" or no backend = state in terraform.tfstate in the working directory."
  },
  { mode: "exam", topic: "Terraform Workflow",
    q: "What does 'terraform apply -refresh-only' do?",
    options: ["Only refreshes providers", "Updates state to match real infrastructure without applying config changes", "Only updates outputs", "Same as plan"],
    correct: 1,
    explain: "apply -refresh-only updates state from real infra; no config changes applied. Replaces terraform refresh."
  },
  { mode: "exam", topic: "Configuration",
    q: "What is the 'dynamic' block used for?",
    options: ["Dynamic variables", "Creating multiple nested blocks (e.g. multiple tags) from a list or map", "Only in providers", "Deprecated"],
    correct: 1,
    explain: "dynamic \"tag\" { for_each = var.tags; content { key = tag.key; value = tag.value } }."
  },
  { mode: "exam", topic: "Configuration",
    q: "How do you reference the count index inside a resource with count?",
    options: ["count.index", "index.count", "count", "resource.index"],
    correct: 0,
    explain: "Inside a resource with count = 3, count.index is 0, 1, or 2."
  },
  { mode: "exam", topic: "Configuration",
    q: "How do you reference the key in a for_each resource?",
    options: ["each.key (and each.value for maps)", "for_each.key", "key.each", "foreach.key"],
    correct: 0,
    explain: "each.key is the key; for maps each.value is the value."
  },
  { mode: "exam", topic: "Security & Best Practices",
    q: "What should you do with .tfvars files that contain secrets?",
    options: ["Commit them to git", "Add them to .gitignore and use -var-file in CI or env vars", "They cannot contain secrets", "Always use -var only"],
    correct: 1,
    explain: "Never commit secret .tfvars; use .gitignore and supply them securely (e.g. CI secrets, env)."
  },
  { mode: "exam", topic: "Terraform Cloud",
    q: "What is 'remote execution' in Terraform Cloud?",
    options: ["Running Terraform in TFC instead of your machine (plan/apply in the cloud)", "Running only plan locally", "Remote state only", "SSH to instances"],
    correct: 0,
    explain: "Remote execution = Terraform runs (plan/apply) on HashiCorp's infrastructure; no local run."
  },
  { mode: "exam", topic: "IaC Concepts",
    q: "What is 'immutable infrastructure' in the context of Terraform?",
    options: ["State never changes", "Replace resources instead of updating in place (e.g. new instance vs patch)", "Terraform never replaces", "Only for containers"],
    correct: 1,
    explain: "Immutable = replace with new resource rather than modify; reduces drift and inconsistency."
  },
  { mode: "exam", topic: "Terraform CLI",
    q: "What does -no-color do?",
    options: ["Disables colored output (useful for logs/CI)", "Removes color from state", "Only for apply", "Not a valid flag"],
    correct: 0,
    explain: "terraform plan -no-color outputs plain text without ANSI color codes."
  },
  { mode: "exam", topic: "State",
    q: "What is 'terraform state show <address>' used for?",
    options: ["Show plan", "Show attributes of a single resource in state", "Show all state", "Show outputs only"],
    correct: 1,
    explain: "terraform state show aws_instance.web displays the state for that resource."
  },
  { mode: "exam", topic: "Modules",
    q: "What happens if a module's source is a Git URL and the repo is updated?",
    options: ["Terraform auto-updates", "Run terraform init -upgrade to get new module version (if ref is branch/tag)", "Modules cannot come from Git", "Only manual copy"],
    correct: 1,
    explain: "terraform init -upgrade re-downloads modules; pin to tag/commit for reproducibility."
  },
  { mode: "exam", topic: "Configuration",
    q: "What is the 'any' type in a variable?",
    options: ["Any resource type", "Variable can accept any type (no type constraint)", "Only for outputs", "Deprecated"],
    correct: 1,
    explain: "type = any or omit type to allow any value; useful for flexible inputs."
  },
  { mode: "exam", topic: "Providers",
    q: "Can you pin Terraform core version separately from provider versions?",
    options: ["No", "Yes; required_version in terraform block for core; required_providers for providers", "Only providers can be pinned", "Only in lock file"],
    correct: 1,
    explain: "terraform { required_version = \">= 1.0\"; required_providers { aws = { ... } } }."
  },
  { mode: "exam", topic: "Backend",
    q: "What is -backend-config used for?",
    options: ["Configuring providers", "Passing backend configuration (e.g. -backend-config=bucket=mybucket)", "Configuring variables", "Configuring modules"],
    correct: 1,
    explain: "terraform init -backend-config=\"key=value\" or -backend-config=file supplies backend settings."
  },
  { mode: "comparison", topic: "State",
    q: "How does Terraform state differ from CloudFormation stack state?",
    options: ["They are identical", "Terraform state is a separate file/backend that maps config to real IDs; CloudFormation tracks in the service", "Terraform has no state", "CloudFormation has no state"],
    correct: 1,
    explain: "Terraform state is first-class (file/backend); CloudFormation state is managed by AWS."
  },
  { mode: "comparison", topic: "Modules",
    q: "How do Terraform modules differ from CloudFormation nested stacks?",
    options: ["No difference", "Both encapsulate reusable config; Terraform modules are first-class in HCL; stacks are separate templates", "Terraform has no modules", "Nested stacks are not reusable"],
    correct: 1,
    explain: "Similar idea; Terraform modules are in same language (HCL); CF nested stacks are separate templates."
  },
  { mode: "exam", topic: "Terraform Workflow",
    q: "What is the purpose of the plan file created with -out?",
    options: ["Backup only", "To apply exactly that plan later (terraform apply planfile) without re-planning", "To share with team only", "To validate only"],
    correct: 1,
    explain: "Applying a saved plan ensures exactly the planned changes are applied (e.g. in CI after approval)."
  },
  { mode: "exam", topic: "Configuration",
    q: "What does 'precondition' and 'postcondition' do (in Terraform 1.2+)?",
    options: ["Only for modules", "Validate assumptions (e.g. data source value) at plan/apply time", "Replace lifecycle", "Deprecated"],
    correct: 1,
    explain: "lifecycle { precondition { } postcondition { } } or check block validate conditions."
  },
  { mode: "exam", topic: "Terraform CLI",
    q: "What does 'terraform graph' produce?",
    options: ["A list of resources", "A representation of the dependency graph (for visualization)", "A plan", "State graph"],
    correct: 1,
    explain: "terraform graph outputs a DOT-format graph of resource dependencies; pipe to graphviz."
  },
  { mode: "exam", topic: "State",
    q: "What is 'terraform state replace-provider' used for?",
    options: ["Replace a provider in config", "Migrate state when a provider is renamed or moved (e.g. hashicorp/aws to custom)", "Replace state file", "Not a valid command"],
    correct: 1,
    explain: "state replace-provider <from> <to> updates state when provider source/namespace changes."
  },
  { mode: "exam", topic: "Modules",
    q: "What does 'source = \"hashicorp/consul/aws\"' refer to?",
    options: ["A local path", "The public Terraform Registry (registry.terraform.io); hashicorp/consul/aws is namespace/module/provider", "A Git URL", "Terraform Cloud only"],
    correct: 1,
    explain: "Registry source: <namespace>/<name>/<provider> for provider-specific module."
  },
  { mode: "exam", topic: "Configuration",
    q: "What is the 'object' type in a variable?",
    options: ["Any resource", "A map with required keys and value types", "A list of objects", "Deprecated"],
    correct: 1,
    explain: "type = object({ name = string; count = number }) enforces structure."
  },
  { mode: "exam", topic: "Terraform Cloud",
    q: "What is a 'sentinel' policy (Terraform Enterprise/Cloud)?",
    options: ["A type of backend", "Policy-as-code to enforce rules on plan/apply (e.g. no public S3)", "A provider", "A module"],
    correct: 1,
    explain: "Sentinel policies evaluate the plan and can block apply (e.g. cost or security rules)."
  },
  { mode: "exam", topic: "Terraform CLI",
    q: "What does 'terraform console' do?",
    options: ["Opens Terraform Cloud UI", "Interactive console to evaluate expressions (e.g. try functions, references)", "Only for debugging state", "Not a valid command"],
    correct: 1,
    explain: "terraform console lets you evaluate HCL expressions in the context of the current state and config."
  },
  { mode: "exam", topic: "Configuration",
    q: "What is the 'coalesce' function used for?",
    options: ["Merging state", "Returning the first non-null value from a list of arguments", "Combining lists", "Only in modules"],
    correct: 1,
    explain: "coalesce(\"\", \"default\") returns \"default\"; coalesce(null, 1) returns 1."
  },
  { mode: "exam", topic: "Configuration",
    q: "What does 'merge(map1, map2)' do?",
    options: ["Merges two maps; keys in map2 override map1", "Merges two lists", "Merges state files", "Deprecated"],
    correct: 0,
    explain: "merge(map1, map2) produces a single map; duplicate keys take value from map2."
  },
  { mode: "exam", topic: "State",
    q: "What is 'terraform state push' typically used for?",
    options: ["Routine workflow", "One-time migration or recovery (e.g. importing existing state into backend)", "Pushing to Git", "Syncing with Terraform Cloud only"],
    correct: 1,
    explain: "state push overwrites remote state; use for migration or recovery, not daily use."
  },
  { mode: "exam", topic: "Providers",
    q: "What does 'provider' in required_providers refer to?",
    options: ["The provider block", "The plugin that implements resources (e.g. hashicorp/aws)", "Terraform core", "A module"],
    correct: 1,
    explain: "required_providers declares which provider plugins are needed (source + version)."
  },
  { mode: "exam", topic: "Modules",
    q: "What is a 'private registry' in Terraform?",
    options: ["A type of backend", "A private (e.g. org-internal) registry for modules/providers", "A secret state", "Terraform Cloud only"],
    correct: 1,
    explain: "Private registry hosts internal modules; Terraform Cloud/Enterprise and other solutions support it."
  },
  { mode: "exam", topic: "Terraform Workflow",
    q: "When you change a resource's 'name' in config (e.g. aws_instance.web to aws_instance.app), what does Terraform do by default?",
    options: ["Nothing", "Destroy the old resource and create a new one (new address in state)", "Rename in place", "Only update state"],
    correct: 1,
    explain: "Changing the resource label = new resource address; Terraform will destroy old and create new unless you state mv."
  },
  { mode: "exam", topic: "Configuration",
    q: "What is 'cidrsubnet' used for?",
    options: ["Subnet resource only", "Calculating subnet CIDR blocks (e.g. cidrsubnet(var.vpc_cidr, 4, 1))", "Validating IPs only", "Only in modules"],
    correct: 1,
    explain: "cidrsubnet(prefix, newbits, netnum) returns a subnet address within a CIDR block."
  },
  { mode: "exam", topic: "Backend",
    q: "Can different workspaces use different backend configs?",
    options: ["Yes, each workspace can have its own backend", "No; backend is shared, but state key/prefix can include workspace name", "Only in Terraform Cloud", "Workspaces and backends are unrelated"],
    correct: 1,
    explain: "One backend config; use key = \"env/${terraform.workspace}/terraform.tfstate\" to separate state per workspace."
  },
  { mode: "exam", topic: "Security & Best Practices",
    q: "What is the benefit of using -lock=true (default) with remote state?",
    options: ["Locks the plan file", "Prevents concurrent apply from corrupting state", "Locks variables", "Locks providers"],
    correct: 1,
    explain: "State locking ensures only one apply runs at a time against the same state."
  },
  { mode: "exam", topic: "Terraform CLI",
    q: "What does 'terraform providers' show?",
    options: ["Provider documentation", "List of providers used in the configuration and their versions", "Only default provider", "Not a valid command"],
    correct: 1,
    explain: "terraform providers lists the providers required by the config and their constraints."
  },
  { mode: "exam", topic: "Configuration",
    q: "What is 'null_resource' typically used for?",
    options: ["Empty state", "Running provisioners or triggers when no real cloud resource is needed", "Deleting resources", "Only in Terraform Cloud"],
    correct: 1,
    explain: "null_resource with local-exec or other provisioners runs scripts; triggers re-run when dependency changes."
  },
  { mode: "exam", topic: "IaC Concepts",
    q: "What is 'configuration drift'?",
    options: ["A type of resource", "When actual infrastructure changes outside Terraform (manual change, another tool) so it no longer matches state", "When state is deleted", "When config changes"],
    correct: 1,
    explain: "Drift = real infra != state. Refresh or apply -refresh-only realigns state."
  },
  { mode: "exam", topic: "Modules",
    q: "What does 'terraform get' do?",
    options: ["Get variables", "Download and update modules (legacy; terraform init does this now)", "Get state", "Get providers"],
    correct: 1,
    explain: "terraform get was for modules; terraform init now handles module download."
  },
  { mode: "exam", topic: "Configuration",
    q: "What is the 'file' function used for?",
    options: ["Reading Terraform files only", "Reading the contents of a file from disk (e.g. file(\"${path.module}/script.sh\"))", "Writing state to file", "Only for .tfvars"],
    correct: 1,
    explain: "file(path) reads the raw contents of a file; path can be relative to module."
  },
  { mode: "exam", topic: "Configuration",
    q: "What is 'path.module'?",
    options: ["Path to Terraform binary", "The filesystem path of the current module", "Path to state", "Path to backend config"],
    correct: 1,
    explain: "path.module = directory containing the current .tf files (useful for relative file())."
  },
  { mode: "exam", topic: "Configuration",
    q: "What is 'path.root'?",
    options: ["Path to root module directory", "Path to Terraform install", "Path to state", "Path to workspace"],
    correct: 0,
    explain: "path.root = root module directory (where you run terraform)."
  },
  { mode: "exam", topic: "Providers",
    q: "What does the 'version' attribute in required_providers support?",
    options: ["Only exact version", "Version constraints: >=, ~>, !=, etc. (e.g. \">= 4.0\", \"~> 5.1\")", "Only ~>", "No constraints"],
    correct: 1,
    explain: "version = \">= 4.0, < 6.0\" or \"~> 5.1\" constrains allowed provider versions."
  },
  { mode: "exam", topic: "State",
    q: "What is the purpose of 'terraform state pull' in a backup workflow?",
    options: ["Backup config", "Save current state to a file (e.g. terraform state pull > backup.json) before risky changes", "Backup providers", "Backup variables"],
    correct: 1,
    explain: "state pull dumps state to stdout; redirect to file for backup before apply or state operations."
  },
  { mode: "exam", topic: "Terraform Workflow",
    q: "What does 'terraform apply' with a plan file as argument do?",
    options: ["Re-plans and applies", "Applies the saved plan without creating a new plan", "Only validates", "Fails"],
    correct: 1,
    explain: "terraform apply tfplan applies that exact plan; no new plan is generated."
  },
  { mode: "exam", topic: "Terraform Cloud",
    q: "What is 'cost estimation' in Terraform Cloud?",
    options: ["Free tier only", "Feature that estimates cost of planned changes (e.g. AWS pricing)", "Same as budget", "Not available"],
    correct: 1,
    explain: "TFC can integrate with Infracost or similar to show estimated cost impact of a run."
  },
  { mode: "exam", topic: "Configuration",
    q: "What does 'concat(list1, list2)' do?",
    options: ["Merges maps", "Concatenates two or more lists into one list", "Combines strings only", "Deprecated"],
    correct: 1,
    explain: "concat([1,2], [3,4]) returns [1,2,3,4]."
  },
  { mode: "exam", topic: "Configuration",
    q: "What is the 'format' function used for?",
    options: ["Formatting state", "String formatting (e.g. format(\"Hello %s\", var.name))", "Formatting outputs only", "Formatting plan"],
    correct: 1,
    explain: "format(fmt, args...) works like sprintf; format(\"%02d\", 5) = \"05\"."
  },
  { mode: "exam", topic: "Backend",
    q: "What backend is built-in for Terraform Cloud?",
    options: ["S3", "cloud (remote)", "local only", "None; use -backend-config"],
    correct: 1,
    explain: "backend \"remote\" (older) or backend \"cloud\" for Terraform Cloud/Enterprise."
  },
  { mode: "exam", topic: "Workspaces",
    q: "Can you delete the 'default' workspace?",
    options: ["Yes", "No; the default workspace cannot be deleted", "Only if empty", "Only in Terraform Cloud"],
    correct: 1,
    explain: "The default workspace is permanent; you can create and delete other workspaces."
  },
  { mode: "exam", topic: "Security & Best Practices",
    q: "Why use separate state per environment (e.g. dev vs prod)?",
    options: ["Not recommended", "Isolation: avoid applying wrong env; limit blast radius; different permissions", "Only for speed", "Terraform requires it"],
    correct: 1,
    explain: "Separate state (or workspaces/backends) per env reduces risk of changing prod by mistake."
  },
  { mode: "comparison", topic: "Backend",
    q: "How does Terraform's remote state compare to storing state in Git?",
    options: ["Identical", "Remote backend supports locking, encryption, access control; Git has no locking and state may contain secrets", "Git is preferred", "Terraform does not support remote state"],
    correct: 1,
    explain: "Remote backend (S3, TFC, etc.) gives locking and security; Git is not suitable for state."
  },
  { mode: "exam", topic: "Terraform CLI",
    q: "What does -parallelism=n do for terraform apply?",
    options: ["Number of plans", "Limits the number of concurrent resource operations (default 10)", "Number of workspaces", "Not a valid flag"],
    correct: 1,
    explain: "terraform apply -parallelism=5 limits concurrent create/update/delete operations."
  },
  { mode: "exam", topic: "Configuration",
    q: "What is 'terraform.workspace' when using the 'default' workspace?",
    options: ["null", "\"default\"", "empty string", "0"],
    correct: 1,
    explain: "terraform.workspace is the current workspace name; for default it is \"default\"."
  },
  { mode: "exam", topic: "Modules",
    q: "What does 'source = \"./modules/vpc\"' mean?",
    options: ["Registry module", "Local module in the path ./modules/vpc relative to the module calling it", "Git module", "Terraform Cloud module"],
    correct: 1,
    explain: "Relative path is relative to the current module directory (path.module)."
  },
  { mode: "exam", topic: "Providers",
    q: "If you use both required_providers and a provider block, what is the relationship?",
    options: ["Provider block is ignored", "required_providers declares need; provider block configures the default instance", "Only one is allowed", "required_providers is optional"],
    correct: 1,
    explain: "required_providers = what to install; provider block = how to configure (region, etc.)."
  },
  { mode: "exam", topic: "State",
    q: "What does 'terraform state list -id=resource-id' do?",
    options: ["Lists by ID only", "Filters list to resources with that physical ID in state", "Sets state ID", "Not a valid option"],
    correct: 1,
    explain: "state list -id=i-12345 shows resources in state with that ID (useful for finding address)."
  },
  { mode: "exam", topic: "Terraform Workflow",
    q: "After 'terraform destroy', is the state file empty?",
    options: ["State file is deleted", "State file exists but typically has no resources (or only those not destroyed)", "State is unchanged", "State is backed up and cleared"],
    correct: 1,
    explain: "After destroy, state usually has no resources; file/backend still exists."
  },
  { mode: "exam", topic: "Configuration",
    q: "What is the 'templatefile' function used for?",
    options: ["Templating .tf files", "Reading a file and interpolating variables (e.g. for user_data or scripts)", "Templating state", "Only in provisioners"],
    correct: 1,
    explain: "templatefile(path, vars) reads a file and replaces ${var.name} with vars; returns string."
  },
  { mode: "exam", topic: "Terraform Cloud",
    q: "What is 'VCS-driven workflow' in Terraform Cloud?",
    options: ["Version control only", "Runs triggered by Git push (e.g. PR creates plan; merge triggers apply)", "Only for state", "Not supported"],
    correct: 1,
    explain: "Connect VCS repo; TFC runs plan on PR/push and can auto-apply on merge to main."
  },
];
