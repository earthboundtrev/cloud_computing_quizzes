window.QUESTION_BANK_RHCE = [
      // === INVENTORIES ===
      { mode: "comparison", topic: "Inventories",
        q: "An Ansible inventory file defines:",
        options: ["Only variables", "Hosts and groups of hosts to manage", "Playbooks only", "Roles only"],
        correct: 1,
        explain: "Inventory = list of hosts and groups; where playbooks run. Static or dynamic."
      },
      { mode: "exam", topic: "Inventories",
        q: "To define a group of hosts in a static inventory, you use:",
        options: ["[groupname] section header", "group: hosts syntax", "Only YAML lists", "JSON only"],
        correct: 1,
        explain: "[webservers] or [webservers:children] for nested. host1 ansible_host=192.168.1.10"
      },
      // === MODULES ===
      { mode: "comparison", topic: "Modules",
        q: "To install a package on managed nodes, which module?",
        options: ["command", "shell", "dnf or yum", "copy"],
        correct: 2,
        explain: "dnf (RHEL 8/9) or yum (RHEL 7). command/shell avoid idempotency."
      },
      { mode: "comparison", topic: "Modules",
        q: "To ensure a service is started and enabled at boot:",
        options: ["command: systemctl start service", "service or systemd module", "shell only", "cron"],
        correct: 1,
        explain: "ansible.builtin.service or ansible.posix.systemd - name, state: started, enabled: yes"
      },
      { mode: "comparison", topic: "Modules",
        q: "To configure firewall rules with firewalld:",
        options: ["command: firewall-cmd", "ansible.posix.firewalld module", "copy only", "lineinfile only"],
        correct: 1,
        explain: "ansible.posix.firewalld - service, port, zone. Idempotent."
      },
      { mode: "comparison", topic: "Modules",
        q: "To deploy a file from control node to managed nodes:",
        options: ["template only", "copy or template module", "fetch", "get_url"],
        correct: 1,
        explain: "copy = static file. template = Jinja2 templated file. fetch = pull from remote."
      },
      { mode: "comparison", topic: "Modules",
        q: "To manage users and groups:",
        options: ["command: useradd", "user and group modules", "shell only", "copy only"],
        correct: 1,
        explain: "ansible.builtin.user, ansible.builtin.group - idempotent, state present/absent"
      },
      { mode: "comparison", topic: "Modules",
        q: "To create an archive (tar, zip):",
        options: ["command: tar", "archive module", "unarchive only", "copy only"],
        correct: 1,
        explain: "ansible.builtin.archive - create. unarchive - extract."
      },
      { mode: "comparison", topic: "Modules",
        q: "To schedule a cron job:",
        options: ["command: crontab -e", "cron module", "at module only", "lineinfile only"],
        correct: 1,
        explain: "ansible.builtin.cron - name, minute, hour, job. Idempotent."
      },
      { mode: "comparison", topic: "Modules",
        q: "To set SELinux context on a file:",
        options: ["command: chcon", "sefcontext + file module or sefcontext", "selinux module (policy)", "copy only"],
        correct: 1,
        explain: "sefcontext for persistent. file module with setype. Or selinux module for policy."
      },
      // === VARIABLES & FACTS ===
      { mode: "comparison", topic: "Variables",
        q: "Ansible facts are:",
        options: ["Only custom variables", "Gathered automatically (hostvars, ansible_distribution, etc.)", "Manual only", "No facts"],
        correct: 1,
        explain: "Facts = gather_facts: yes; ansible_* vars (hostname, IP, distro). setup module."
      },
      { mode: "exam", topic: "Variables",
        q: "To capture command output into a variable:",
        options: ["set_fact with command module and register", "Only register", "vars: only", "include_vars only"],
        correct: 1,
        explain: "- command: cmd\n  register: result\n- set_fact: myvar: \"{{ result.stdout }}\""
      },
      { mode: "exam", topic: "Variables",
        q: "Conditional execution uses:",
        options: ["only if/else in YAML", "when: condition", "always", "never"],
        correct: 1,
        explain: "when: ansible_os_family == 'RedHat' - run task only if true. when: variable is defined"
      },
      // === ROLES & COLLECTIONS ===
      { mode: "comparison", topic: "Roles",
        q: "Ansible roles provide:",
        options: ["Only variables", "Reusable structure (tasks, handlers, vars, templates)", "No structure", "Playbooks only"],
        correct: 1,
        explain: "Role = tasks/, handlers/, vars/, defaults/, templates/, files/ - reusable."
      },
      { mode: "exam", topic: "Roles",
        q: "To use a role in a playbook:",
        options: ["include: role", "roles: - role_name or role: role_name", "import_role only", "No roles"],
        correct: 1,
        explain: "roles: - myrole. Or role: myrole. Pre_tasks, roles, post_tasks."
      },
      { mode: "comparison", topic: "Roles",
        q: "Ansible Content Collections provide:",
        options: ["Only playbooks", "Modules, roles, plugins (namespaced, e.g., ansible.posix)", "No modules", "Only inventory"],
        correct: 1,
        explain: "Collections = ansible.posix, ansible.utils; modules, roles. ansible-galaxy collection install"
      },
      // === VAULT ===
      { mode: "comparison", topic: "Vault",
        q: "Ansible Vault is used to:",
        options: ["Store playbooks only", "Encrypt sensitive data (vars, files)", "No encryption", "Only inventory"],
        correct: 1,
        explain: "ansible-vault encrypt file. --ask-vault-pass or vault password file. Encrypt vars, files."
      },
      { mode: "exam", topic: "Vault",
        q: "To run a playbook with vault-encrypted vars, you need:",
        options: ["No password", "--ask-vault-pass or ANSIBLE_VAULT_PASSWORD_FILE", "Only -e", "No vault"],
        correct: 1,
        explain: "ansible-playbook -i inv play.yml --ask-vault-pass. Or env/file for automation."
      },
      // === PLAYBOOKS ===
      { mode: "exam", topic: "Playbooks",
        q: "A play in Ansible contains:",
        options: ["Only hosts", "hosts, tasks, and optionally vars, roles", "Only tasks", "Only roles"],
        correct: 1,
        explain: "Play = hosts: webservers, tasks: [...], vars: {...}, roles: [...]"
      },
      { mode: "exam", topic: "Playbooks",
        q: "To handle task failure (e.g., ignore or fail):",
        options: ["No handling", "ignore_errors: yes or failed_when", "always", "never"],
        correct: 1,
        explain: "ignore_errors: yes - continue. failed_when: condition - fail if true. rescue for blocks."
      },
      { mode: "exam", topic: "Playbooks",
        q: "To run a playbook with ansible-navigator:",
        options: ["ansible-playbook only", "ansible-navigator run play.yml", "ansible only", "No navigator"],
        correct: 1,
        explain: "ansible-navigator run play.yml. Uses execution environment (container)."
      },
      // === CONFIGURATION ===
      { mode: "comparison", topic: "Configuration",
        q: "ansible.cfg configures:",
        options: ["Only inventory path", "inventory, remote_user, become, etc.", "No config", "Only roles path"],
        correct: 1,
        explain: "[defaults] inventory, remote_user, become, host_key_checking. [privilege_escalation]"
      },
      { mode: "exam", topic: "Configuration",
        q: "To run tasks as root on managed nodes:",
        options: ["remote_user: root only", "become: yes (privilege escalation)", "No escalation", "su only"],
        correct: 1,
        explain: "become: yes, become_user: root. Uses sudo by default. become_method: su if needed."
      },
      // === TEMPLATES ===
      { mode: "comparison", topic: "Templates",
        q: "The template module uses:",
        options: ["Plain text only", "Jinja2 templating ({{ var }}, {% for %})", "No variables", "JSON only"],
        correct: 1,
        explain: "template module - src .j2, dest. Jinja2: {{ var }}, {% for %}, {% if %}"
      },
      // === MORE ===
      { mode: "exam", topic: "Modules",
        q: "To modify a specific line in a file:",
        options: ["copy only", "lineinfile or blockinfile module", "template only", "replace only"],
        correct: 1,
        explain: "lineinfile - one line. blockinfile - block. replace - regex. Idempotent."
      },
      { mode: "exam", topic: "Modules",
        q: "To create a directory with specific permissions:",
        options: ["command: mkdir", "file module with state: directory", "copy only", "template only"],
        correct: 1,
        explain: "file: path: /path, state: directory, mode: '0755'. Idempotent."
      },
      { mode: "exam", topic: "Modules",
        q: "To manage LVM logical volumes with Ansible:",
        options: ["command: lvcreate only", "community.general.lvol or lvg modules", "No LVM", "copy only"],
        correct: 1,
        explain: "community.general.lvol, community.general.lvg. Or command/shell for custom."
      },
      { mode: "exam", topic: "Playbooks",
        q: "Loops in Ansible use:",
        options: ["for loop in YAML only", "loop: or with_items", "No loops", "Only include"],
        correct: 1,
        explain: "loop: [a, b, c] or with_items. loop: \"{{ list }}\". item in loop."
      },
      { mode: "exam", topic: "Playbooks",
        q: "Handlers are used to:",
        options: ["Run before tasks", "Run once at end of play when notified", "Run always", "No handlers"],
        correct: 1,
        explain: "handlers: - name: restart httpd, notify: restart httpd. Run when notified, once per play."
      },
      { mode: "comparison", topic: "Configuration",
        q: "To configure managed nodes for Ansible, you typically:",
        options: ["Store passwords in playbook", "Use SSH keys + optionally privilege escalation", "Telnet only", "No SSH"],
        correct: 1,
        explain: "SSH key-based auth. ansible_user, ansible_ssh_private_key_file. become for sudo."
      },
      { mode: "exam", topic: "Inventories",
        q: "To define host-specific variables in inventory:",
        options: ["Only in playbook", "hostvars or inline: host ansible_user=root", "No host vars", "Only in roles"],
        correct: 1,
        explain: "host ansible_user=admin ansible_host=10.0.0.1. Or host_vars/hostname.yml"
      },
      { mode: "exam", topic: "Modules",
        q: "To partition a disk and create a filesystem with Ansible:",
        options: ["command: fdisk only", "community.general.parted + filesystem modules", "No disk management", "copy only"],
        correct: 1,
        explain: "community.general.parted for partitions. filesystem module for mkfs. Or command for custom."
      },
      { mode: "exam", topic: "Playbooks",
        q: "To run tasks only on RHEL hosts:",
        options: ["No condition", "when: ansible_os_family == 'RedHat'", "always", "Never"],
        correct: 1,
        explain: "when: ansible_os_family == 'RedHat'. Or ansible_distribution_major_version == '9'"
      },
      { mode: "comparison", topic: "Roles",
        q: "Role default variables are in:",
        options: ["tasks/main.yml", "defaults/main.yml", "vars/main.yml only", "handlers only"],
        correct: 1,
        explain: "defaults/main.yml - lowest precedence; overridable. vars/main.yml - higher."
      },
      { mode: "exam", topic: "Templates",
        q: "In a Jinja2 template, to iterate over a list:",
        options: ["No iteration", "{% for item in list %}...{% endfor %}", "{{ for }}", "only if"],
        correct: 1,
        explain: "{% for item in list %} {{ item }} {% endfor %}. Also {% if %}, {{ var }}"
      },
      { mode: "exam", topic: "Modules",
        q: "The parted module (community.general) can:",
        options: ["Only read", "Create partitions, set partition type", "No partitioning", "Format only"],
        correct: 1,
        explain: "community.general.parted - device, number, state, part_type. Creates/manages partitions."
      },
      { mode: "exam", topic: "Playbooks",
        q: "To ensure a playbook is idempotent:",
        options: ["Use command/shell for all tasks", "Use declarative modules (dnf, file, service) instead of command when possible", "No idempotency", "Always run twice"],
        correct: 1,
        explain: "Declarative modules = state present/absent; idempotent. command/shell often not."
      },
      { mode: "comparison", topic: "Configuration",
        q: "ansible-navigator.yml configures:",
        options: ["Only inventory", "Execution environment, ansible config, inventory", "No config", "Only roles"],
        correct: 1,
        explain: "ansible-navigator.yml - EE image, ansible.cfg path, inventory. For ansible-navigator."
      },
      { mode: "exam", topic: "Modules",
        q: "To set file ownership and permissions:",
        options: ["command: chown", "file module: owner, group, mode", "copy only", "template only"],
        correct: 1,
        explain: "file: path, owner, group, mode. Or copy/template with ownership params."
      },
      { mode: "exam", topic: "Playbooks",
        q: "To include another playbook:",
        options: ["No include", "import_playbook or include_role", "copy only", "template only"],
        correct: 1,
        explain: "import_playbook: other.yml - static. include_role - dynamic. Pre-task vs post-task."
      },
      { mode: "exam", topic: "Modules",
        q: "To ensure a package is absent (removed):",
        options: ["dnf remove only via command", "dnf: name: pkg, state: absent", "No removal", "yum only"],
        correct: 1,
        explain: "dnf: name: package, state: absent. Idempotent."
      },
      { mode: "exam", topic: "Handlers",
        q: "When are handlers executed?",
        options: ["Immediately when notified", "At end of play, once per handler, only if notified", "Never", "At start"],
        correct: 1,
        explain: "Handlers run at end of play; only if notified; once per handler even if notified multiple times."
      },
      { mode: "comparison", topic: "Modules",
        q: "To create a logical volume in LVM:",
        options: ["command: lvcreate only", "community.general.lvol module", "No LVM", "parted only"],
        correct: 1,
        explain: "community.general.lvol - vg, lv, size. Or command module."
      },
      { mode: "exam", topic: "Variables",
        q: "Host variables can be defined in:",
        options: ["Playbook only", "Inventory, host_vars/ directory, or group_vars/", "No host vars", "Roles only"],
        correct: 1,
        explain: "host_vars/hostname.yml, group_vars/groupname.yml, or inline in inventory."
      },
      { mode: "exam", topic: "Roles",
        q: "To install a role from Ansible Galaxy:",
        options: ["copy role manually", "ansible-galaxy role install namespace.role", "No Galaxy", "git clone only"],
        correct: 1,
        explain: "ansible-galaxy role install namespace.role. -r requirements.yml for list."
      },
      { mode: "exam", topic: "Vault",
        q: "To edit a vault-encrypted file:",
        options: ["Decrypt manually first", "ansible-vault edit file", "No edit", "vi only"],
        correct: 1,
        explain: "ansible-vault edit file - decrypts, opens editor, re-encrypts."
      },
      { mode: "exam", topic: "Modules",
        q: "To add a line to a file only if it does not exist:",
        options: ["copy only", "lineinfile: line, create: yes", "template only", "blockinfile only"],
        correct: 1,
        explain: "lineinfile: path, line, create: yes. State present. Idempotent."
      },
      { mode: "exam", topic: "Playbooks",
        q: "To run a task on a single host in a group:",
        options: ["Cannot do this", "Use run_once: yes or limit: host", "Always all hosts", "No limit"],
        correct: 1,
        explain: "run_once: yes - run on first host. ansible-playbook --limit host - limit inventory."
      },
      { mode: "comparison", topic: "Modules",
        q: "The fetch module is used to:",
        options: ["Copy from control to remote", "Copy files from remote to control node", "Template only", "No fetch"],
        correct: 1,
        explain: "fetch - pull files from managed nodes to control node. copy = push."
      },
      { mode: "exam", topic: "Configuration",
        q: "To disable host key checking (e.g., for lab):",
        options: ["No option", "host_key_checking = False in ansible.cfg", "Only SSH config", "No SSH"],
        correct: 1,
        explain: "[defaults] host_key_checking = False. Or env ANSIBLE_HOST_KEY_CHECKING=False. Lab only!"
      },
      { mode: "exam", topic: "Playbooks",
        q: "A block with rescue runs rescue tasks when:",
        options: ["Always", "When any task in the block fails", "Never", "At end only"],
        correct: 1,
        explain: "block: - task1, rescue: - task2. If task1 fails, task2 runs. always: runs regardless."
      },
      // === TRIPLED BANK ===
      { mode: "exam", topic: "Modules",
        q: "To ensure a file is absent (deleted):",
        options: ["command: rm", "file: path: /path state: absent", "Only template", "Only copy"],
        correct: 1,
        explain: "file: path, state: absent. Idempotent. Removes file or directory."
      },
      { mode: "exam", topic: "Variables",
        q: "group_vars/ directory:",
        options: ["Only for one host", "Variables for a group (groupname.yml)", "Only for all", "Only in role"],
        correct: 1,
        explain: "group_vars/groupname.yml = vars for that group. all/ for all hosts."
      },
      { mode: "exam", topic: "Playbooks",
        q: "To run a task until a condition is true:",
        options: ["Only when", "until: condition with register; retries/delay", "Only loop", "Only block"],
        correct: 1,
        explain: "until: result.rc == 0, register: result. retries: 10, delay: 5."
      },
      { mode: "exam", topic: "Modules",
        q: "To ensure a symlink exists:",
        options: ["Only copy", "file: src: /path dest: /link state: link", "Only template", "Only command"],
        correct: 1,
        explain: "file: src, dest, state: link. Or state: hard for hardlink."
      },
      { mode: "exam", topic: "Roles",
        q: "Role dependencies (meta/main.yml):",
        options: ["Only tasks", "dependencies: - role; run before this role", "Only vars", "Only handlers"],
        correct: 1,
        explain: "meta/main.yml: dependencies: - role: other_role. Executed before this role's tasks."
      },
      { mode: "exam", topic: "Vault",
        q: "To rekey (change password) vault file:",
        options: ["Only encrypt again", "ansible-vault rekey file", "Only decrypt", "Only edit"],
        correct: 1,
        explain: "ansible-vault rekey file. Prompts for old and new password."
      },
      { mode: "exam", topic: "Playbooks",
        q: "To run a task on the control node (not managed):",
        options: ["Only delegate_to", "delegate_to: localhost connection: local", "Only run_once", "Only when"],
        correct: 1,
        explain: "delegate_to: localhost. connection: local. Runs on control node."
      },
      { mode: "exam", topic: "Modules",
        q: "To get a URL and save to file (on managed node):",
        options: ["Only copy", "get_url: url=... dest=/path", "Only fetch", "Only template"],
        correct: 1,
        explain: "get_url = download to managed node. fetch = from managed to control."
      },
      { mode: "exam", topic: "Inventories",
        q: "Dynamic inventory script must output:",
        options: ["Only YAML", "JSON (specific format: _meta, groups, hostvars)", "Only JSON list", "Only ini"],
        correct: 1,
        explain: "Dynamic inventory = script outputs JSON with _meta, groups; optional hostvars."
      },
      { mode: "exam", topic: "Templates",
        q: "In Jinja2, default value if variable undefined:",
        options: ["Only {{ var }}", "{{ var | default('value') }} or {{ var or 'value' }}", "Only if", "Only omit"],
        correct: 1,
        explain: "{{ var | default('x') }} or {{ var or 'x' }}. default(omit) to skip parameter."
      },
      { mode: "exam", topic: "Modules",
        q: "To ensure a service is stopped and disabled:",
        options: ["command: systemctl stop", "service: name=svc state=stopped enabled=no", "Only stop", "Only enabled=no"],
        correct: 1,
        explain: "state=stopped, enabled=no. Idempotent."
      },
      { mode: "exam", topic: "Configuration",
        q: "ANSIBLE_HOST_KEY_CHECKING:",
        options: ["Only in inventory", "Environment variable; skip host key check", "Only in playbook", "Only in ansible.cfg"],
        correct: 1,
        explain: "ANSIBLE_HOST_KEY_CHECKING=False. Or in ansible.cfg [defaults]. Lab only."
      },
      { mode: "exam", topic: "Playbooks",
        q: "To run a role with parameters:",
        options: ["Only role: name", "role: name vars: { key: value } or role: name key=value", "Only vars in role", "Only defaults"],
        correct: 1,
        explain: "role: name vars: { a: 1 }. Or role: name, a: 1 (role params)."
      },
      { mode: "exam", topic: "Handlers",
        q: "To flush handlers mid-play:",
        options: ["Only at end", "meta: flush_handlers", "Only notify", "Only listen"],
        correct: 1,
        explain: "meta: flush_handlers = run any notified handlers now (e.g., before next role)."
      },
      { mode: "exam", topic: "Modules",
        q: "To add a line only if not present (idempotent):",
        options: ["Only lineinfile", "lineinfile: path line state=present insertafter/insertbefore", "Only blockinfile", "Only replace"],
        correct: 1,
        explain: "lineinfile: path, line, state=present. insertafter=BOF or line. Idempotent."
      },
      { mode: "exam", topic: "Variables",
        q: "Magic variable ansible_play_hosts:",
        options: ["All hosts in inventory", "Hosts in scope for current play", "Only current host", "Only limit"],
        correct: 1,
        explain: "ansible_play_hosts = hosts in current play (respecting serial, limit)."
      },
      { mode: "exam", topic: "Roles",
        q: "Role tasks/main.yml:",
        options: ["Optional", "Main list of tasks (or include_tasks)", "Only handlers", "Only vars"],
        correct: 1,
        explain: "tasks/main.yml = main tasks. Can use include_tasks for split."
      },
      { mode: "exam", topic: "Vault",
        q: "To use multiple vault passwords (e.g., dev vs prod):",
        options: ["Only one password", "--vault-id label@prompt or --vault-id label@file", "Only prompt", "Only file"],
        correct: 1,
        explain: "ansible-playbook --vault-id dev@prompt --vault-id prod@.prod_vault. Match in play with vault_ids."
      },
      { mode: "exam", topic: "Playbooks",
        q: "serial: 2 in a play means:",
        options: ["Only 2 plays", "Run on 2 hosts at a time (rolling)", "Only 2 hosts total", "Only batch"],
        correct: 1,
        explain: "serial: 2 = batch size; update 2 hosts at a time. Or percentage."
      },
      { mode: "exam", topic: "Modules",
        q: "To set sysctl parameter:",
        options: ["command: sysctl only", "ansible.posix.sysctl or lineinfile on /etc/sysctl.d/", "Only copy", "Only template"],
        correct: 1,
        explain: "ansible.posix.sysctl name=param value=1. Or template/file in /etc/sysctl.d/."
      },
      { mode: "exam", topic: "Inventories",
        q: "Inventory variable precedence (higher wins):",
        options: ["Only group", "host_vars > group (child > parent) > group_vars/all", "Only host", "Only all"],
        correct: 1,
        explain: "Host vars override group. More specific group overrides parent. all is lowest."
      },
      { mode: "exam", topic: "Templates",
        q: "Jinja2 filter to make list unique:",
        options: ["Only sort", "{{ list | unique }}", "Only join", "Only default"],
        correct: 1,
        explain: "unique = dedupe. sort, join, default common. Also map, select, reject."
      },
      { mode: "exam", topic: "Modules",
        q: "To reload syslog (rsyslog) config:",
        options: ["Only restart", "service: name=rsyslog state=reloaded (if supported)", "Only command", "Only template"],
        correct: 1,
        explain: "state=reloaded where supported. Or notify handler to restart."
      },
      { mode: "exam", topic: "Playbooks",
        q: "To run a task only on first host in batch (serial):",
        options: ["Only run_once", "run_once: yes (often with delegate_to: localhost)", "Only when", "Only limit"],
        correct: 1,
        explain: "run_once: yes = run on first host only. Good for delegate_to: localhost."
      },
      { mode: "exam", topic: "Configuration",
        q: "become_method: su:",
        options: ["Use sudo", "Use su instead of sudo", "Only sudo", "Only run as root"],
        correct: 1,
        explain: "become_method: su. For systems without sudo or different escalation."
      },
      { mode: "exam", topic: "Roles",
        q: "Role vars/main.yml vs defaults/main.yml:",
        options: ["Same", "defaults = low precedence; vars = higher (override)", "Only vars", "Only defaults"],
        correct: 1,
        explain: "defaults = overridable by play/CLI. vars = higher; use for role internals."
      },
      { mode: "exam", topic: "Modules",
        q: "To create a tarball on managed node:",
        options: ["Only unarchive", "archive: path=src dest=archive.tar.gz format=gz", "Only copy", "Only fetch"],
        correct: 1,
        explain: "archive = create (tar, zip). unarchive = extract."
      },
      { mode: "exam", topic: "Variables",
        q: "To define a variable for one play only:",
        options: ["Only in role", "vars: in play or vars_files:", "Only host_vars", "Only group_vars"],
        correct: 1,
        explain: "vars: { key: value } in play. vars_files: - file.yml. Scope = that play."
      },
      { mode: "exam", topic: "Handlers",
        q: "Handler listen:",
        options: ["Only name", "listen: topic; notify: topic (multiple handlers for one topic)", "Only notify", "Only once"],
        correct: 1,
        explain: "handlers: - listen: restart_foo. notify: restart_foo. Multiple handlers can listen."
      },
      { mode: "exam", topic: "Playbooks",
        q: "To fail with a message:",
        options: ["Only assert", "fail: msg=\"message\"", "Only when", "Only ignore_errors"],
        correct: 1,
        explain: "fail: msg=\"...\". Stops play. when: condition to fail only when true."
      },
      { mode: "exam", topic: "Modules",
        q: "To ensure a user has specific SSH key in authorized_keys:",
        options: ["Only copy", "authorized_key: user=name key=\"{{ key }}\" state=present", "Only lineinfile", "Only template"],
        correct: 1,
        explain: "authorized_key = manage key. key=content or key=path. state=present/absent."
      },
      { mode: "exam", topic: "Inventories",
        q: "Inventory alias (host in different name):",
        options: ["Not supported", "host1 ansible_host=192.168.1.1 (connect to IP, name host1)", "Only ansible_host", "Only IP"],
        correct: 1,
        explain: "ansible_host = where to connect. ansible_port, ansible_user. Alias = inventory name."
      },
      { mode: "exam", topic: "Templates",
        q: "To avoid undefined in Jinja2:",
        options: ["Only default", "{{ var | default(omit) }} or defined test", "Only if var", "Only omit"],
        correct: 1,
        explain: "default(omit) = skip parameter if undefined. {% if var is defined %}."
      },
      { mode: "exam", topic: "Modules",
        q: "To ensure a package is latest (upgrade):",
        options: ["dnf install only", "dnf: name=package state=latest", "Only state=present", "Only upgrade"],
        correct: 1,
        explain: "state=latest = upgrade if older. state=present = install if missing."
      },
      { mode: "exam", topic: "Playbooks",
        q: "Tags: run only tagged tasks:",
        options: ["Only in playbook", "ansible-playbook --tags tag1,tag2", "Only --skip-tags", "Only tag in role"],
        correct: 1,
        explain: "ansible-playbook play.yml --tags web. --skip-tags to exclude."
      },
      { mode: "exam", topic: "Configuration",
        q: "ansible_user in inventory:",
        options: ["Only in play", "Override remote_user for that host/group", "Only become", "Only in role"],
        correct: 1,
        explain: "ansible_user=admin in inventory. ansible_ssh_private_key_file. Override play remote_user."
      },
      { mode: "exam", topic: "Roles",
        q: "To pass variable to role and use in role:",
        options: ["Only defaults", "role: name, var: value then in role vars or params", "Only vars in role", "Only include_role"],
        correct: 1,
        explain: "role: name, myvar: value. Role sees myvar in vars or as param (role_params)."
      },
      { mode: "exam", topic: "Vault",
        q: "Vault password file permissions:",
        options: ["Any", "Should be 600; Ansible may warn if world-readable", "Only 644", "Only 700"],
        correct: 1,
        explain: "Secure vault password file; chmod 600. Don't commit to repo."
      },
      { mode: "exam", topic: "Modules",
        q: "To ensure a directory has specific SELinux type:",
        options: ["Only file", "file: path state=directory + secontext type=type_t or use sefcontext", "Only chcon", "Only restorecon"],
        correct: 1,
        explain: "file with setype (depends on module). Or separate sefcontext + file. restorecon after."
      },
      { mode: "exam", topic: "Variables",
        q: "Fact caching (e.g., JSON file):",
        options: ["Not supported", "Set fact_caching in ansible.cfg; gather_facts once, reuse", "Only memory", "Only Redis"],
        correct: 1,
        explain: "fact_caching = jsonfile (or redis). fact_caching_connection. Speeds up runs."
      },
      { mode: "exam", topic: "Playbooks",
        q: "To include a task file with variables:",
        options: ["Only import_tasks", "include_tasks: file.yml vars: { a: 1 } (dynamic)", "Only vars", "Only static"],
        correct: 1,
        explain: "include_tasks = dynamic (can loop). import_tasks = static. include can pass vars."
      },
      { mode: "exam", topic: "Modules",
        q: "To wait for port to be open:",
        options: ["Only command", "wait_for: port=80 delay=0 (wait for port open)", "Only pause", "Only assert"],
        correct: 1,
        explain: "wait_for: port=80. host, state=started (open). timeout, delay. For dependencies."
      },
      { mode: "exam", topic: "Inventories",
        q: "Children groups in inventory:",
        options: ["Only [group]", "[parent:children] then parent = group1, group2", "Only one level", "Only static"],
        correct: 1,
        explain: "[parent:children]\ngroup1\ngroup2. parent inherits group1, group2 vars."
      },
      { mode: "exam", topic: "Templates",
        q: "Jinja2 for loop with index:",
        options: ["Only for item in list", "{% for item in list %} {{ loop.index }} {{ item }}", "Only loop.index0", "Only item"],
        correct: 1,
        explain: "loop.index = 1-based. loop.index0 = 0-based. loop.first, loop.last."
      },
      { mode: "exam", topic: "Modules",
        q: "To ensure a line is absent from file:",
        options: ["Only lineinfile", "lineinfile: path line state=absent", "Only blockinfile", "Only replace"],
        correct: 1,
        explain: "lineinfile: path, line (regex or exact), state=absent. Removes matching line(s)."
      },
      { mode: "exam", topic: "Playbooks",
        q: "Strategy: free (vs linear):",
        options: ["Same as linear", "Free = don't wait for other hosts; faster", "Only linear", "Only serial"],
        correct: 1,
        explain: "strategy: free = each host continues without waiting. linear = one batch at a time."
      },
      { mode: "exam", topic: "Configuration",
        q: "retries and delay for task:",
        options: ["Only retries", "retries: 3 delay: 10 (seconds between retries)", "Only delay", "Only until"],
        correct: 1,
        explain: "retries: 3, delay: 5. Retry task on failure. Often with until."
      },
      { mode: "exam", topic: "Roles",
        q: "Role handlers:",
        options: ["Only in play", "handlers/main.yml in role; notify: handler_name", "Only in tasks", "Only global"],
        correct: 1,
        explain: "Role can have handlers/main.yml. notify: name. Handler name = role name or simple name."
      },
      { mode: "exam", topic: "Modules",
        q: "To set timezone:",
        options: ["Only command", "community.general.timezone or template /etc/localtime", "Only copy", "Only file"],
        correct: 1,
        explain: "community.general.timezone name=America/New_York. Or link /usr/share/zoneinfo/..."
      },
      { mode: "exam", topic: "Variables",
        q: "Hostvars['other_host']['var']:",
        options: ["Only current host", "Variable from another host (need to gather_facts or set)", "Only same group", "Only inventory"],
        correct: 1,
        explain: "hostvars['hostname']['ansible_distribution']. Requires facts for that host or set_fact."
      },
      { mode: "exam", topic: "Playbooks",
        q: "To run play only on hosts where fact is true:",
        options: ["Only limit", "when: ansible_facts['key'] | default(false)", "Only hosts", "Only serial"],
        correct: 1,
        explain: "when: ansible_os_family == 'RedHat'. Or when: myvar. Run task/play conditionally."
      },
      { mode: "exam", topic: "Vault",
        q: "Vault ID label in play (which password):",
        options: ["Not used", "vault_ids: [label] in play or var; match --vault-id", "Only --vault-id", "Only prompt"],
        correct: 1,
        explain: "vault_ids: [dev] in play. Match --vault-id dev@prompt. For multiple vaults."
      },
      { mode: "exam", topic: "Modules",
        q: "To extract a tarball on managed node:",
        options: ["Only archive", "unarchive: src=file dest=/path (copy=yes) or src=url copy=no", "Only copy", "Only get_url"],
        correct: 1,
        explain: "unarchive: src (local or URL), dest. copy=yes (from control) or no (on remote)."
      },
      { mode: "exam", topic: "Inventories",
        q: "Inventory plugin (e.g., aws_ec2):",
        options: ["Only static", "Plugin in YAML inventory; sources: - plugin: name", "Only script", "Only ini"],
        correct: 1,
        explain: "plugin: aws_ec2. Or use -i plugin.yml. Filters, keyed_groups. Replaces script."
      },
      { mode: "exam", topic: "Templates",
        q: "Jinja2 filter to convert to int:",
        options: ["Only string", "{{ var | int }}", "Only default", "Only float"],
        correct: 1,
        explain: "| int, | float, | string. | default(0) for undefined."
      },
      { mode: "exam", topic: "Modules",
        q: "To manage swap file:",
        options: ["Only command", "community.general.swapfile or mount + swapon", "Only file", "Only copy"],
        correct: 1,
        explain: "community.general.swapfile path size state=present. Or shell: mkswap, swapon."
      },
      { mode: "exam", topic: "Playbooks",
        q: "To run a role multiple times with different params:",
        options: ["Only once", "include_role: name role: name with loop or with_items", "Only role", "Only vars"],
        correct: 1,
        explain: "include_role: name loop: [ { a: 1 }, { a: 2 } ]. Dynamic; role runs per item."
      },
      { mode: "exam", topic: "Configuration",
        q: "gathering: explicit:",
        options: ["Gather all always", "Only gather when Facter/setup explicitly called", "Only implicit", "Only once"],
        correct: 1,
        explain: "gathering: explicit = no auto gather_facts; call setup when needed. Speeds up if no facts."
      },
      { mode: "exam", topic: "Roles",
        q: "Role path (ansible.cfg roles_path):",
        options: ["Only current dir", "Where to look for roles (colon-separated)", "Only /etc/ansible/roles", "Only galaxy"],
        correct: 1,
        explain: "roles_path = /path1:/path2. ansible-galaxy install -p path. Role lookup order."
      },
      { mode: "exam", topic: "Handlers",
        q: "Handler notified by multiple tasks:",
        options: ["Runs multiple times", "Runs once at end of play (Ansible coalesces)", "Only first notify", "Only last"],
        correct: 1,
        explain: "Multiple notify: restart_foo = handler runs once. Ansible batches notifications."
      },
      { mode: "exam", topic: "Modules",
        q: "To ensure a block of text in file (multi-line):",
        options: ["Only lineinfile", "blockinfile: block: \"...\" marker: \"# {mark} ANSIBLE\"", "Only template", "Only copy"],
        correct: 1,
        explain: "blockinfile: block (multiline), marker. state=present/absent. Idempotent block."
      },
      { mode: "exam", topic: "Variables",
        q: "Priority of -e var=value (extra vars):",
        options: ["Lowest", "Highest (override play, host, etc.)", "Only play", "Only role"],
        correct: 1,
        explain: "Extra vars (-e) = highest precedence. Override everything."
      },
      { mode: "exam", topic: "Playbooks",
        q: "To run a playbook from within another:",
        options: ["Only include_role", "import_playbook: other.yml", "Only include_tasks", "Only role"],
        correct: 1,
        explain: "import_playbook: other.yml. Static; at parse time. Top-level only."
      },
      { mode: "exam", topic: "Modules",
        q: "To reload a systemd user service:",
        options: ["Only service", "systemd: name=unit state=reloaded scope=user", "Only scope=user", "Only command"],
        correct: 1,
        explain: "systemd: name, state=reloaded. scope=user for user units. daemon_reload if needed."
      },
      { mode: "exam", topic: "Inventories",
        q: "Inventory source can be:",
        options: ["Only one file", "File, directory, script, or plugin; -i can list multiple", "Only directory", "Only plugin"],
        correct: 1,
        explain: "-i file -i dir (merge). Directory = one file per host/group or dynamic."
      },
      { mode: "exam", topic: "Templates",
        q: "To include another template file:",
        options: ["Only copy", "{% include 'partial.j2' %} in Jinja2", "Only template", "Only block"],
        correct: 1,
        explain: "{% include 'templates/partial.j2' %}. Renders that file in place."
      },
      { mode: "exam", topic: "Modules",
        q: "To ensure a group exists with GID:",
        options: ["Only user", "group: name=mygroup gid=2000 state=present", "Only groupadd", "Only usermod"],
        correct: 1,
        explain: "group: name, gid, state=present/absent. Idempotent."
      },
      { mode: "exam", topic: "Playbooks",
        q: "To force handler run even if no change:",
        options: ["Only notify", "force_handlers: yes in play (run at end even if task failed)", "Only flush", "Only listen"],
        correct: 1,
        explain: "force_handlers: yes = run notified handlers even if later task failed."
      },
      { mode: "exam", topic: "Configuration",
        q: "stdout_callback:",
        options: ["Only default", "Change output (e.g., yaml, debug, unixy)", "Only yaml", "Only log"],
        correct: 1,
        explain: "stdout_callback = default, yaml, debug, etc. In ansible.cfg [defaults]."
      },
      { mode: "exam", topic: "Roles",
        q: "Role condition (when to run role):",
        options: ["Only in play", "when on include_role or role with vars", "Only in role tasks", "Only in meta"],
        correct: 1,
        explain: "include_role: name when: condition. Or role: name when: condition (in some versions)."
      },
      { mode: "exam", topic: "Vault",
        q: "To view (decrypt) vault file without editing:",
        options: ["Only edit", "ansible-vault view file", "Only decrypt", "Only rekey"],
        correct: 1,
        explain: "ansible-vault view file. Decrypt and display. Prompts for password."
      },
      { mode: "exam", topic: "Modules",
        q: "To ensure a kernel module is loaded:",
        options: ["Only command modprobe", "community.general.modprobe or command: modprobe name", "Only file", "Only template"],
        correct: 1,
        explain: "modprobe module. Or lineinfile /etc/modules-load.d/. State present/absent."
      },
      { mode: "exam", topic: "Variables",
        q: "To create a list in play vars:",
        options: ["Only string", "vars: mylist: [ a, b, c ] or mylist: - a - b", "Only dict", "Only hostvars"],
        correct: 1,
        explain: "vars: mylist: [ 1, 2, 3 ]. Or mylist: - a - b - c. Use in loop."
      },
      { mode: "exam", topic: "Playbooks",
        q: "To run task with elevated privilege (become):",
        options: ["Only remote_user", "become: yes become_user: root (or other)", "Only sudo", "Only su"],
        correct: 1,
        explain: "become: yes. become_user: root. become_method: sudo (default) or su."
      },
      { mode: "exam", topic: "Modules",
        q: "To ensure a file has exact content (replace whole file):",
        options: ["Only lineinfile", "copy: content: \"...\" dest (or template for Jinja2)", "Only blockinfile", "Only replace"],
        correct: 1,
        explain: "copy: content=literal dest. template: content with Jinja2. Replaces file."
      },
      { mode: "exam", topic: "Inventories",
        q: "Inventory host range:",
        options: ["Not supported", "host[1:10] = host1..host10 (numeric or letter)", "Only numeric", "Only one host"],
        correct: 1,
        explain: "host[1:10], host[a:z]. Expands to host1, host2, ..."
      },
      { mode: "exam", topic: "Templates",
        q: "Jinja2 to strip whitespace:",
        options: ["Only trim", "{{ var | trim }} or {%- -%} for blocks", "Only default", "Only replace"],
        correct: 1,
        explain: "| trim. In blocks {%- -%} strips newline/space. lstrip, rstrip."
      },
      { mode: "exam", topic: "Modules",
        q: "To ensure a mount is present:",
        options: ["Only command mount", "ansible.posix.mount or community.general.mount", "Only file", "Only fstab"],
        correct: 1,
        explain: "mount: path, src, fstype, state=mounted. Manages fstab and mount."
      },
      { mode: "exam", topic: "Playbooks",
        q: "To run only tasks with tag 'config' (skip others):",
        options: ["Only --tags all", "ansible-playbook --tags config", "Only --skip-tags", "Only tag in task"],
        correct: 1,
        explain: "--tags config = only tasks tagged config. --tags tagged = only tagged tasks."
      },
      { mode: "exam", topic: "Configuration",
        q: "Inventory in ansible.cfg:",
        options: ["Only /etc/ansible/hosts", "inventory = path or list (comma)", "Only path", "Only one file"],
        correct: 1,
        explain: "inventory = ./inventory or /etc/ansible/hosts. Or list. Default if -i not used."
      },
      { mode: "exam", topic: "Roles",
        q: "To use a role from a Git repo (ansible-galaxy):",
        options: ["Only install from Galaxy", "ansible-galaxy install git+https://... or -r requirements.yml", "Only requirements", "Only git"],
        correct: 1,
        explain: "requirements.yml: - src: git+https://... name: role. ansible-galaxy install -r requirements.yml."
      },
      { mode: "exam", topic: "Handlers",
        q: "To restart two services when one handler is notified:",
        options: ["Only one handler", "One handler with two service tasks or listen", "Only notify twice", "Only two handlers"],
        correct: 1,
        explain: "Handler with two service tasks. Or two handlers with same listen: topic; notify topic."
      },
      { mode: "exam", topic: "Modules",
        q: "To change file permissions (mode) only if wrong:",
        options: ["Only command chmod", "file: path mode='0755' (idempotent)", "Only copy", "Only template"],
        correct: 1,
        explain: "file: path, mode='0755'. Only changes if different. owner, group too."
      },
      { mode: "exam", topic: "Variables",
        q: "set_fact makes variable:",
        options: ["Only for current task", "Available for rest of play (host-scoped)", "Only for role", "Only for all hosts"],
        correct: 1,
        explain: "set_fact: myvar: value. Persists for that host for rest of play. Cache if fact_caching."
      },
      { mode: "exam", topic: "Playbooks",
        q: "To run a task for each item and get item in template:",
        options: ["Only loop", "loop: list and in template {{ item }} or {{ item.key }}", "Only with_items", "Only include_role"],
        correct: 1,
        explain: "loop: [ a, b ]. In template {{ item }}. Or loop: dict and item.key, item.value."
      },
      { mode: "exam", topic: "Vault",
        q: "To decrypt a vault file to plain:",
        options: ["Only view", "ansible-vault decrypt file", "Only rekey", "Only edit"],
        correct: 1,
        explain: "ansible-vault decrypt file. Removes encryption. Use with care."
      },
      { mode: "exam", topic: "Modules",
        q: "To ensure a symlink is absent:",
        options: ["Only state=link", "file: path=/path state=absent (removes symlink)", "Only delete", "Only unlink"],
        correct: 1,
        explain: "file: path (symlink path), state=absent. Removes symlink, not target."
      },
      { mode: "exam", topic: "Inventories",
        q: "Inventory variable for SSH port:",
        options: ["Only ansible_port in play", "ansible_port=2222 in inventory", "Only ssh_port", "Only port"],
        correct: 1,
        explain: "ansible_port=2222. ansible_host, ansible_user, ansible_ssh_private_key_file."
      },
      { mode: "exam", topic: "Templates",
        q: "Jinja2 to get list length:",
        options: ["Only length()", "{{ list | length }}", "Only count", "Only size"],
        correct: 1,
        explain: "{{ list | length }}. Or list | count in some contexts."
      },
      { mode: "exam", topic: "Playbooks",
        q: "To ignore task failure but record it:",
        options: ["Only ignore_errors", "ignore_errors: yes and register; check result.failed", "Only failed_when", "Only rescue"],
        correct: 1,
        explain: "ignore_errors: yes. register: result. Later: when: result.failed. Continue but track."
      },
      { mode: "exam", topic: "Configuration",
        q: "become_user (default when become: yes):",
        options: ["Current user", "root (default); change with become_user: other", "Only root", "Only sudo"],
        correct: 1,
        explain: "become_user: root by default. become_user: appuser to run as different user."
      },
      { mode: "exam", topic: "Roles",
        q: "Role task with conditional:",
        options: ["Only in play", "when: condition in role task (same as play task)", "Only in vars", "Only in meta"],
        correct: 1,
        explain: "In tasks/main.yml: - name: ... when: ansible_os_family == 'RedHat'. Role tasks support when."
      },
      { mode: "exam", topic: "Modules",
        q: "To ensure a timer (systemd) is active:",
        options: ["Only service", "systemd: name=my.timer state=started enabled=yes", "Only timer", "Only cron"],
        correct: 1,
        explain: "systemd: name=my.timer state=started enabled=yes. Timer units need daemon_reload often."
      },
      { mode: "exam", topic: "Variables",
        q: "ansible_version:",
        options: ["Only in config", "Magic dict: fullstring, major, minor (Ansible version)", "Only string", "Only major"],
        correct: 1,
        explain: "ansible_version.fullstring, .major, .minor. When: ansible_version.major >= 2."
      },
      { mode: "exam", topic: "Playbooks",
        q: "To run a role before any other roles (pre-task style):",
        options: ["Only roles:", "pre_tasks: then roles: then tasks: then post_tasks:", "Only tasks:", "Only post_tasks:"],
        correct: 1,
        explain: "pre_tasks run first. Then roles. Then tasks. Then post_tasks. Then handlers."
      },
      { mode: "exam", topic: "Handlers",
        q: "Handler with same name in two roles:",
        options: ["Both run", "First defined wins (or use listen to coalesce)", "Only first role", "Only second"],
        correct: 1,
        explain: "Same handler name = one handler. Order/scope matters. Use listen for shared topic."
      },
      { mode: "exam", topic: "Modules",
        q: "To ensure a line is at end of file:",
        options: ["Only lineinfile", "lineinfile: path line insertafter=EOF", "Only blockinfile", "Only append"],
        correct: 1,
        explain: "insertafter=EOF = append to file. insertbefore=BOF = prepend."
      },
      { mode: "exam", topic: "Inventories",
        q: "Inventory group variable in YAML:",
        options: ["Only [group:vars]", "In YAML: all: vars: { key: value } or group: children: ... vars:", "Only host_vars", "Only ini"],
        correct: 1,
        explain: "YAML: all: vars:. Or group: vars:. Or group: children: other; other: vars:."
      },
      { mode: "exam", topic: "Templates",
        q: "Jinja2 to format list as string:",
        options: ["Only join", "{{ list | join(', ') }}", "Only string", "Only map"],
        correct: 1,
        explain: "| join(', ') = comma-separated. | map(attribute='name') | join."
      },
      { mode: "exam", topic: "Modules",
        q: "To ensure a systemd drop-in exists:",
        options: ["Only copy", "copy or template to /etc/systemd/system/unit.d/override.conf; daemon_reload", "Only template", "Only service"],
        correct: 1,
        explain: "Copy file to /etc/systemd/system/unit.d/override.conf. systemd daemon-reload. Restart service."
      },
      { mode: "exam", topic: "Playbooks",
        q: "To run a task only when a previous task changed:",
        options: ["Only when", "register: result; when: result is changed", "Only changed_when", "Only notify"],
        correct: 1,
        explain: "register: r. when: r is changed. Runs only if previous task reported change."
      },
      { mode: "exam", topic: "Vault",
        q: "Vault password in CI/CD:",
        options: ["Only prompt", "ANSIBLE_VAULT_PASSWORD_FILE=file or --vault-id @file", "Only interactive", "Only rekey"],
        correct: 1,
        explain: "Use file or env; don't prompt in CI. Secure the file (secrets manager)."
      },
      { mode: "exam", topic: "Roles",
        q: "Role handlers are run:",
        options: ["Before role tasks", "At end of play when notified (like play handlers)", "Only in role", "Only once"],
        correct: 1,
        explain: "Role handlers run at end of play when notified. Same as play-level handlers."
      },
      { mode: "exam", topic: "Modules",
        q: "To add a line after a specific line (anchor):",
        options: ["Only lineinfile", "lineinfile: path line insertafter='regex or line'", "Only insertbefore", "Only blockinfile"],
        correct: 1,
        explain: "insertafter='# optional' or insertafter='regex'. insertbefore= for before."
      },
      { mode: "exam", topic: "Variables",
        q: "To use a variable from another host in a template:",
        options: ["Only current host", "{{ hostvars['hostname']['var'] }} in template", "Only group_vars", "Only hostvars in play"],
        correct: 1,
        explain: "hostvars['other_host']['ansible_default_ipv4']['address']. Need facts for other_host."
      },
      { mode: "exam", topic: "Playbooks",
        q: "To run a role and pass a list to it:",
        options: ["Only role: name", "role: name vars: { list: [ a, b ] } then in role loop: list", "Only loop in role", "Only include_role"],
        correct: 1,
        explain: "role: name vars: { items: [ 1, 2, 3 ] }. Role uses var in loop or template."
      },
      { mode: "exam", topic: "Configuration",
        q: "timeout for connection (SSH):",
        options: ["Only in play", "timeout in ansible.cfg or environment", "Only environment", "Only SSH config"],
        correct: 1,
        explain: "timeout = 10 in [defaults]. Or env ANSIBLE_TIMEOUT. SSH connect timeout."
      },
      { mode: "exam", topic: "Modules",
        q: "To ensure a package is not installed:",
        options: ["Only state=present", "dnf: name=package state=absent", "Only remove", "Only purge"],
        correct: 1,
        explain: "state=absent = remove. Idempotent."
      },
      { mode: "exam", topic: "Inventories",
        q: "To limit run to one host from CLI:",
        options: ["Only in play hosts", "ansible-playbook -i inv play.yml --limit host1", "Only -i", "Only hosts: host1"],
        correct: 1,
        explain: "--limit host1 or --limit group1. Restricts to that host/group for that run."
      },
      { mode: "exam", topic: "Templates",
        q: "Jinja2 to select items from list (filter):",
        options: ["Only for", "{{ list | selectattr('key') | list }} or select('match')", "Only map", "Only reject"],
        correct: 1,
        explain: "selectattr('key') = filter by attribute. select('search', 'pattern'). reject for exclude."
      },
      { mode: "exam", topic: "Playbooks",
        q: "To run a task only on hosts in group 'db':",
        options: ["Only limit", "when: inventory_hostname in groups['db']", "Only hosts: db", "Only serial"],
        correct: 1,
        explain: "when: inventory_hostname in groups['db']. Or run separate play with hosts: db."
      },
      { mode: "exam", topic: "Handlers",
        q: "To trigger handler from a task that \"changed\" programmatically:",
        options: ["Only notify", "changed_when: true and notify: handler", "Only when", "Only result"],
        correct: 1,
        explain: "changed_when: true = force \"changed\" so handler runs. register + notify."
      },
      { mode: "exam", topic: "Modules",
        q: "To ensure a directory and all parents exist:",
        options: ["Only file state=directory", "file: path=/a/b/c state=directory (creates parents)", "Only mkdir -p", "Only recursive"],
        correct: 1,
        explain: "file: path, state=directory. Creates parent dirs. mode, owner, group."
      },
      { mode: "exam", topic: "Roles",
        q: "To apply a role to a subset of hosts in play:",
        options: ["Only in role", "when on include_role: when: inventory_hostname in groups['web']", "Only hosts", "Only limit"],
        correct: 1,
        explain: "include_role: name when: condition. Or run play with hosts: web only."
      },
      { mode: "exam", topic: "Variables",
        q: "To override a role default from play:",
        options: ["Only in role vars", "vars: in play (same name overrides role default)", "Only role params", "Only set_fact"],
        correct: 1,
        explain: "Play vars: myvar: 2. Overrides role defaults/main.yml. Role vars/main.yml override play if set in role."
      },
      { mode: "exam", topic: "Playbooks",
        q: "To run a task with a different user (no become):",
        options: ["Only become_user", "remote_user: appuser for that task or play", "Only become", "Only su"],
        correct: 1,
        explain: "remote_user: appuser. Connect as that user. Or use become_user with become."
      },
      { mode: "exam", topic: "Modules",
        q: "To ensure a timer is enabled but not start it now:",
        options: ["Only state=started", "systemd: name=my.timer state=stopped enabled=yes", "Only enabled", "Only daemon_reload"],
        correct: 1,
        explain: "state=stopped enabled=yes = will start at boot but not now. state=started = run now."
      },
    ];
